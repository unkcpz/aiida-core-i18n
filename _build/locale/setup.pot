# SOME DESCRIPTIVE TITLE.
# Copyright (C) 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved
# This file is distributed under the same license as the AiiDA package.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: AiiDA 1.0\n"
"Report-Msgid-Bugs-To: \n"
"POT-Creation-Date: 2019-05-15 14:09+0800\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <LL@li.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#: ../../source/setup/ssh_proxycommand.rst:5
msgid "Using the proxy_command option with ssh"
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:7
msgid "This page explains how to use the ``proxy_command`` feature of ``ssh``. This feature is needed when you want to connect to a computer ``B``, but you are not allowed to connect directly to it; instead, you have to connect to computer ``A`` first, and then perform a further connection from ``A`` to ``B``."
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:14
msgid "Requirements"
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:15
msgid "The idea is that you ask ``ssh`` to connect to computer ``B`` by using a proxy to create a sort of tunnel. One way to perform such an operation is to use ``netcat``, a tool that simply takes the standard input and redirects it to a given TCP port."
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:20
msgid "Therefore, a requirement is to install ``netcat`` on computer A. You can already check if the ``netcat`` or ``nc`` command is available on you computer, since some distributions include it (if it is already installed, the output of the command::"
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:27
msgid "or::"
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:31
msgid "will return the absolute path to the executable)."
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:33
msgid "If this is not the case, you will need to install it on your own. Typically, it will be sufficient to look for a netcat distribution on the web, unzip the downloaded package, ``cd`` into the folder and execute something like::"
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:42
msgid "This usually creates a subfolder ``bin``, containing the ``netcat`` and ``nc`` executables. Write down the full path to ``nc`` that we will need later."
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:48
msgid "ssh/config"
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:49
msgid "You can now test the proxy command with ``ssh``. Edit the ``~/.ssh/config`` file on the computer on which you installed AiiDA (or create it if missing) and add the following lines::"
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:58
msgid "where you have to replace:"
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:60
msgid "``FULLHOSTNAMEA`` and ``FULLHOSTNAMEB`` with the fully-qualified hostnames of computer ``A`` and ``B`` (remembering that ``B`` is the computer you want to actually connect to, and ``A`` is the intermediate computer to which you have direct access)"
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:64
msgid "``USER_A`` and ``USER_B`` are the usernames on the two machines (that can possibly be the same)."
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:66
msgid "``ABSPATH_NETCAT`` is the absolute path to the ``nc`` executable that you obtained in the previous step."
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:69
msgid "Remember also to configure passwordless ssh connections using ssh keys both from your computer to ``A``, and from ``A`` to ``B``."
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:72
msgid "Once you add this lines and save the file, try to execute::"
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:76
msgid "which should allow you to directly connect to ``B``."
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:80
msgid "WARNING"
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:82
msgid "There are several versions of netcat available on the web. We found at least one case in which the executable wasn't working properly. At the end of the connection, the ``netcat`` executable might still be running: as a result, you may rapidly leave the cluster with hundreds of opened ``ssh`` connections, one for every time you connect to the cluster ``B``. Therefore, check on both computers ``A`` and ``B`` that the number of processes ``netcat`` and ``ssh`` are disappearing if you close the connection. To check if such processes are running, you can execute::"
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:96
msgid "Remember that a cluster might have more than one login node, and the ``ssh`` connection will randomly connect to any of them."
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:101
msgid "AiiDA config"
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:102
msgid "If the above steps work, setup and configure now the computer as explained :ref:`here <computer_setup>`."
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:105
msgid "If you properly set up the ``~/.ssh/config`` file in the previous step, AiiDA should properly parse the information in the file and provide the correct default value for the ``proxy_command`` during the ``verdi computer configure`` step."
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:113
msgid "Some notes on the ``proxy_command`` option"
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:115
msgid "In the ``~/.ssh/config`` file, you can leave the ``%h`` and ``%p`` placeholders, that are then automatically replaced by ssh with the hostname and the port of the machine ``B`` when creating the proxy. However, in the AiiDA ``proxy_command`` option, you need to put the actual hostname and port. If you start from a properly configured ``~/.ssh/config`` file, AiiDA will already replace these placeholders with the correct values. However, if you input the ``proxy_command`` value manually, remember to write the hostname and the port and not ``%h`` and ``%p``."
msgstr ""

#: ../../source/setup/ssh_proxycommand.rst:124
msgid "In the ``~/.ssh/config`` file, you can also insert stdout and stderr redirection, e.g. ``2> /dev/null`` to hide any error that may occur during the proxying/tunneling. However, you should only give AiiDA the actual command to be executed, without any redirection. Again, AiiDA will remove the redirection when it automatically reads the ``~/.ssh/config`` file, but be careful if entering manually the content in this field."
msgstr ""

