

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aiida.restapi.common package &mdash; AiiDA 1.0.0b2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/contentui.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/quick_installation.html">Quick installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/updating_installation.html">Updating AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../get_started/index.html">First things first</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/daemon.html">Setup the daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/computers.html">Setup a computer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/codes.html">Setup a code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/plugins.html">Plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/provenance.html">Provenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/calculations.html">Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/workflows.html">Workflows</a></li>
</ul>
<p class="caption"><span class="caption-text">Working with</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../working/processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working/functions.html">Calculation and work functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working/calculations.html">Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working/workflows.html">Workflows</a></li>
</ul>
<p class="caption"><span class="caption-text">Working with AiiDA</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html">Command line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#scripting">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#data-types">Data types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#groups">Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#schedulers">Schedulers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#querying-data">Querying data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#caching">Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#result-manager">Result manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#backups">Backups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#rest-api">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#cookbook">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../import_export/index.html">Import and Export</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/index.html">AiiDA design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/index.html#aiida-core">AiiDA core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/index.html#aiida-plugins">AiiDA plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">StructureData</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html#pseudopotentials">Pseudopotentials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html#plugin-development">Plugin development</a></li>
</ul>
<p class="caption"><span class="caption-text">API reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="`aiida package &lt;https://aiida-core.readthedocs.io/en/latest/apidoc/aiida.html&gt;`_">`aiida package &lt;https://aiida-core.readthedocs.io/en/latest/apidoc/aiida.html&gt;`_</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>aiida.restapi.common package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/apidoc/aiida.restapi.common.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-aiida.restapi.common">
<span id="aiida-restapi-common-package"></span><h1>aiida.restapi.common package<a class="headerlink" href="#module-aiida.restapi.common" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-aiida.restapi.common.config">
<span id="submodules"></span><h2>Submodules<a class="headerlink" href="#module-aiida.restapi.common.config" title="Permalink to this headline">¶</a></h2>
<p>Constants used in rest api</p>
<dl class="data">
<dt id="aiida.restapi.common.config.APP_CONFIG">
<code class="descclassname">aiida.restapi.common.config.</code><code class="descname">APP_CONFIG</code><em class="property"> = {'DEBUG': False, 'PROPAGATE_EXCEPTIONS': True}</em><a class="headerlink" href="#aiida.restapi.common.config.APP_CONFIG" title="Permalink to this definition">¶</a></dt>
<dd><p>JSON serialization config. Leave this dictionary empty if default Flask
serializer is desired.</p>
<p>Here is a list a all supported fields. If a field is not present in the
dictionary its value is assumed to be ‘default’.</p>
<p>DATETIME_FORMAT: allowed values are ‘asinput’ and ‘default’.</p>
</dd></dl>

<dl class="data">
<dt id="aiida.restapi.common.config.MAX_TREE_DEPTH">
<code class="descclassname">aiida.restapi.common.config.</code><code class="descname">MAX_TREE_DEPTH</code><em class="property"> = 5</em><a class="headerlink" href="#aiida.restapi.common.config.MAX_TREE_DEPTH" title="Permalink to this definition">¶</a></dt>
<dd><p>Aiida profile used by the REST api when no profile is specified (ex. by
–aiida-profile flag).
This has to be one of the profiles registered in .aiida/config.json</p>
<p>In case you want to use the default stored in
.aiida/config.json, set this varibale to “default”</p>
</dd></dl>

<dl class="data">
<dt id="aiida.restapi.common.config.PREFIX">
<code class="descclassname">aiida.restapi.common.config.</code><code class="descname">PREFIX</code><em class="property"> = '/api/v3'</em><a class="headerlink" href="#aiida.restapi.common.config.PREFIX" title="Permalink to this definition">¶</a></dt>
<dd><p>Flask app configs.</p>
<p>DEBUG: True/False. enables debug mode N.B.
!!!For production run use ALWAYS False!!!</p>
<p>PROPAGATE_EXCEPTIONS: True/False serve REST exceptions to the client (and not a
generic 500: Internal Server Error exception)</p>
</dd></dl>

<dl class="data">
<dt id="aiida.restapi.common.config.SERIALIZER_CONFIG">
<code class="descclassname">aiida.restapi.common.config.</code><code class="descname">SERIALIZER_CONFIG</code><em class="property"> = {'datetime_format': 'default'}</em><a class="headerlink" href="#aiida.restapi.common.config.SERIALIZER_CONFIG" title="Permalink to this definition">¶</a></dt>
<dd><p>Caching configuration</p>
<p>memcached: backend caching system</p>
</dd></dl>

<span class="target" id="module-aiida.restapi.common.exceptions"></span><p>This file contains the exceptions that are raised by the RESTapi at the
highest level, namely that of the interaction with the client. Their
specificity resides into the fact that they return a message that is embedded
into the HTTP response.</p>
<p>Example:</p>
<blockquote>
<div>…/api/v1/nodes/ … (TODO compete this with an actual example)</div></blockquote>
<p>Other errors arising at deeper level, e.g. those raised by the QueryBuilder
or internal errors, are not embedded into the HTTP response.</p>
<dl class="exception">
<dt id="aiida.restapi.common.exceptions.RestFeatureNotAvailable">
<em class="property">exception </em><code class="descclassname">aiida.restapi.common.exceptions.</code><code class="descname">RestFeatureNotAvailable</code><a class="reference internal" href="../_modules/aiida/restapi/common/exceptions.html#RestFeatureNotAvailable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.exceptions.RestFeatureNotAvailable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="aiida.common.html#aiida.common.exceptions.FeatureNotAvailable" title="aiida.common.exceptions.FeatureNotAvailable"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.common.exceptions.FeatureNotAvailable</span></code></a></p>
<dl class="attribute">
<dt id="aiida.restapi.common.exceptions.RestFeatureNotAvailable.__module__">
<code class="descname">__module__</code><em class="property"> = 'aiida.restapi.common.exceptions'</em><a class="headerlink" href="#aiida.restapi.common.exceptions.RestFeatureNotAvailable.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="exception">
<dt id="aiida.restapi.common.exceptions.RestInputValidationError">
<em class="property">exception </em><code class="descclassname">aiida.restapi.common.exceptions.</code><code class="descname">RestInputValidationError</code><a class="reference internal" href="../_modules/aiida/restapi/common/exceptions.html#RestInputValidationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.exceptions.RestInputValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="aiida.common.html#aiida.common.exceptions.InputValidationError" title="aiida.common.exceptions.InputValidationError"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.common.exceptions.InputValidationError</span></code></a></p>
<p>document with an example</p>
<dl class="attribute">
<dt id="aiida.restapi.common.exceptions.RestInputValidationError.__module__">
<code class="descname">__module__</code><em class="property"> = 'aiida.restapi.common.exceptions'</em><a class="headerlink" href="#aiida.restapi.common.exceptions.RestInputValidationError.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="exception">
<dt id="aiida.restapi.common.exceptions.RestValidationError">
<em class="property">exception </em><code class="descclassname">aiida.restapi.common.exceptions.</code><code class="descname">RestValidationError</code><a class="reference internal" href="../_modules/aiida/restapi/common/exceptions.html#RestValidationError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.exceptions.RestValidationError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="aiida.common.html#aiida.common.exceptions.ValidationError" title="aiida.common.exceptions.ValidationError"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.common.exceptions.ValidationError</span></code></a></p>
<p>document with an example</p>
<dl class="attribute">
<dt id="aiida.restapi.common.exceptions.RestValidationError.__module__">
<code class="descname">__module__</code><em class="property"> = 'aiida.restapi.common.exceptions'</em><a class="headerlink" href="#aiida.restapi.common.exceptions.RestValidationError.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<span class="target" id="module-aiida.restapi.common.utils"></span><p>Util methods</p>
<dl class="class">
<dt id="aiida.restapi.common.utils.CustomJSONEncoder">
<em class="property">class </em><code class="descclassname">aiida.restapi.common.utils.</code><code class="descname">CustomJSONEncoder</code><span class="sig-paren">(</span><em>skipkeys=False</em>, <em>ensure_ascii=True</em>, <em>check_circular=True</em>, <em>allow_nan=True</em>, <em>sort_keys=False</em>, <em>indent=None</em>, <em>separators=None</em>, <em>encoding='utf-8'</em>, <em>default=None</em>, <em>use_decimal=True</em>, <em>namedtuple_as_object=True</em>, <em>tuple_as_array=True</em>, <em>bigint_as_string=False</em>, <em>item_sort_key=None</em>, <em>for_json=False</em>, <em>ignore_nan=False</em>, <em>int_as_string_bitcount=None</em>, <em>iterable_as_array=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/restapi/common/utils.html#CustomJSONEncoder"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.utils.CustomJSONEncoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">flask.json.JSONEncoder</span></code></p>
<p>Custom json encoder for serialization.
This has to be provided to the Flask app in order to replace the default
encoder.</p>
<dl class="attribute">
<dt id="aiida.restapi.common.utils.CustomJSONEncoder.__module__">
<code class="descname">__module__</code><em class="property"> = 'aiida.restapi.common.utils'</em><a class="headerlink" href="#aiida.restapi.common.utils.CustomJSONEncoder.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.restapi.common.utils.CustomJSONEncoder.default">
<code class="descname">default</code><span class="sig-paren">(</span><em>o</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/restapi/common/utils.html#CustomJSONEncoder.default"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.utils.CustomJSONEncoder.default" title="Permalink to this definition">¶</a></dt>
<dd><p>Override default method from JSONEncoder to change serializer
:param o: Object e.g. dict, list that will be serialized
:return: serialized object</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiida.restapi.common.utils.DatetimePrecision">
<em class="property">class </em><code class="descclassname">aiida.restapi.common.utils.</code><code class="descname">DatetimePrecision</code><span class="sig-paren">(</span><em>dtobj</em>, <em>precision</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/restapi/common/utils.html#DatetimePrecision"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.utils.DatetimePrecision" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A simple class which stores a datetime object with its precision. No
internal check is done (cause itis not possible).</p>
<dl class="docutils">
<dt>precision:  1 (only full date)</dt>
<dd>2 (date plus hour)
3 (date + hour + minute)
4 (dare + hour + minute +second)</dd>
</dl>
<dl class="attribute">
<dt id="aiida.restapi.common.utils.DatetimePrecision.__dict__">
<code class="descname">__dict__</code><em class="property"> = mappingproxy({'__module__': 'aiida.restapi.common.utils', '__doc__': '\n    A simple class which stores a datetime object with its precision. No\n    internal check is done (cause itis not possible).\n\n    precision:  1 (only full date)\n                2 (date plus hour)\n                3 (date + hour + minute)\n                4 (dare + hour + minute +second)\n    ', '__init__': &lt;function DatetimePrecision.__init__&gt;, '__dict__': &lt;attribute '__dict__' of 'DatetimePrecision' objects&gt;, '__weakref__': &lt;attribute '__weakref__' of 'DatetimePrecision' objects&gt;})</em><a class="headerlink" href="#aiida.restapi.common.utils.DatetimePrecision.__dict__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.restapi.common.utils.DatetimePrecision.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>dtobj</em>, <em>precision</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/restapi/common/utils.html#DatetimePrecision.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.utils.DatetimePrecision.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructor to check valid datetime object and precision</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.restapi.common.utils.DatetimePrecision.__module__">
<code class="descname">__module__</code><em class="property"> = 'aiida.restapi.common.utils'</em><a class="headerlink" href="#aiida.restapi.common.utils.DatetimePrecision.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.restapi.common.utils.DatetimePrecision.__weakref__">
<code class="descname">__weakref__</code><a class="headerlink" href="#aiida.restapi.common.utils.DatetimePrecision.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="aiida.restapi.common.utils.Utils">
<em class="property">class </em><code class="descclassname">aiida.restapi.common.utils.</code><code class="descname">Utils</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/restapi/common/utils.html#Utils"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.utils.Utils" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class that gathers all the utility functions for parsing URI,
validating request, pass it to the translator, and building HTTP response</p>
<p>An istance of Utils has to be included in the api class so that the
configuration parameters used to build the api are automatically
accessible by the methods of Utils without the need to import them from
the config.py file.</p>
<dl class="attribute">
<dt id="aiida.restapi.common.utils.Utils.__dict__">
<code class="descname">__dict__</code><em class="property"> = mappingproxy({'__module__': 'aiida.restapi.common.utils', '__doc__': '\n    A class that gathers all the utility functions for parsing URI,\n    validating request, pass it to the translator, and building HTTP response\n\n    An istance of Utils has to be included in the api class so that the\n    configuration parameters used to build the api are automatically\n    accessible by the methods of Utils without the need to import them from\n    the config.py file.\n\n    ', 'op_conv_map': {'=': '==', '!=': '!==', '=in=': 'in', '=notin=': '!in', '&gt;': '&gt;', '&lt;': '&lt;', '&gt;=': '&gt;=', '&lt;=': '&lt;=', '=like=': 'like', '=ilike=': 'ilike'}, '__init__': &lt;function Utils.__init__&gt;, 'strip_api_prefix': &lt;function Utils.strip_api_prefix&gt;, 'split_path': &lt;staticmethod object&gt;, 'parse_path': &lt;function Utils.parse_path&gt;, 'validate_request': &lt;function Utils.validate_request&gt;, 'paginate': &lt;function Utils.paginate&gt;, 'build_headers': &lt;function Utils.build_headers&gt;, 'build_response': &lt;staticmethod object&gt;, 'build_datetime_filter': &lt;staticmethod object&gt;, 'build_translator_parameters': &lt;function Utils.build_translator_parameters&gt;, 'parse_query_string': &lt;function Utils.parse_query_string&gt;, '__dict__': &lt;attribute '__dict__' of 'Utils' objects&gt;, '__weakref__': &lt;attribute '__weakref__' of 'Utils' objects&gt;})</em><a class="headerlink" href="#aiida.restapi.common.utils.Utils.__dict__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.restapi.common.utils.Utils.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/restapi/common/utils.html#Utils.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.utils.Utils.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets internally the configuration parameters</p>
</dd></dl>

<dl class="attribute">
<dt id="aiida.restapi.common.utils.Utils.__module__">
<code class="descname">__module__</code><em class="property"> = 'aiida.restapi.common.utils'</em><a class="headerlink" href="#aiida.restapi.common.utils.Utils.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.restapi.common.utils.Utils.__weakref__">
<code class="descname">__weakref__</code><a class="headerlink" href="#aiida.restapi.common.utils.Utils.__weakref__" title="Permalink to this definition">¶</a></dt>
<dd><p>list of weak references to the object (if defined)</p>
</dd></dl>

<dl class="staticmethod">
<dt id="aiida.restapi.common.utils.Utils.build_datetime_filter">
<em class="property">static </em><code class="descname">build_datetime_filter</code><span class="sig-paren">(</span><em>dtobj</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/restapi/common/utils.html#Utils.build_datetime_filter"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.utils.Utils.build_datetime_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>This function constructs a filter for a datetime object to be in a
certain datetime interval according to the precision.</p>
<p>The interval is [reference_datetime, reference_datetime + delta_time],
where delta_time is a function fo the required precision.</p>
<p>This function should be used to replace a datetime filter based on
the equality operator that is inehrently “picky” because it implies
matching two datetime objects down to the microsecond or something,
by a “tolerant” operator which checks whether the datetime is in an
interval.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a suitable entry of the filter dictionary</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiida.restapi.common.utils.Utils.build_headers">
<code class="descname">build_headers</code><span class="sig-paren">(</span><em>rel_pages=None</em>, <em>url=None</em>, <em>total_count=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/restapi/common/utils.html#Utils.build_headers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.utils.Utils.build_headers" title="Permalink to this definition">¶</a></dt>
<dd><p>Construct the header dictionary for an HTTP response. It includes related
pages, total count of results (before pagination).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rel_pages</strong> – a dictionary defining related pages (first, prev, next, last)</li>
<li><strong>url</strong> – (string) the full url, i.e. the url that the client uses to get Rest resources</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="aiida.restapi.common.utils.Utils.build_response">
<em class="property">static </em><code class="descname">build_response</code><span class="sig-paren">(</span><em>status=200</em>, <em>headers=None</em>, <em>data=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/restapi/common/utils.html#Utils.build_response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.utils.Utils.build_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Build the response</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>status</strong> – status of the response, e.g. 200=OK, 400=bad request</li>
<li><strong>headers</strong> – dictionary for additional header k,v pairs,
e.g. X-total-count=&lt;number of rows resulting from query&gt;</li>
<li><strong>data</strong> – a dictionary with the data returned by the Resource</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a Flask response object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiida.restapi.common.utils.Utils.build_translator_parameters">
<code class="descname">build_translator_parameters</code><span class="sig-paren">(</span><em>field_list</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/restapi/common/utils.html#Utils.build_translator_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.utils.Utils.build_translator_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes a list of elements resulting from the parsing the query_string and
elaborates them in order to provide translator-compliant instructions</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>field_list</strong> – a (nested) list of elements resulting from parsing the query_string</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the filters in the</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="aiida.restapi.common.utils.Utils.op_conv_map">
<code class="descname">op_conv_map</code><em class="property"> = {'!=': '!==', '&lt;': '&lt;', '&lt;=': '&lt;=', '=': '==', '=ilike=': 'ilike', '=in=': 'in', '=like=': 'like', '=notin=': '!in', '&gt;': '&gt;', '&gt;=': '&gt;='}</em><a class="headerlink" href="#aiida.restapi.common.utils.Utils.op_conv_map" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.restapi.common.utils.Utils.paginate">
<code class="descname">paginate</code><span class="sig-paren">(</span><em>page</em>, <em>perpage</em>, <em>total_count</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/restapi/common/utils.html#Utils.paginate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.utils.Utils.paginate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates limit and offset for the reults of a query,
given the page and the number of restuls per page.
Moreover, calculates the last available page and raises an exception
if the
required page exceeds that limit.
If number of rows==0, only page 1 exists
:param page: integer number of the page that has to be viewed
:param perpage: integer defining how many results a page contains
:param total_count: the total number of rows retrieved by the query
:return: integers: limit, offset, rel_pages</p>
</dd></dl>

<dl class="method">
<dt id="aiida.restapi.common.utils.Utils.parse_path">
<code class="descname">parse_path</code><span class="sig-paren">(</span><em>path_string</em>, <em>parse_pk_uuid=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/restapi/common/utils.html#Utils.parse_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.utils.Utils.parse_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes the path and parse it checking its validity. Does not parse “io”,
“content” fields. I do not check the validity of the path, since I assume
that this is done by the Flask routing methods.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path_string</strong> – the path string</li>
<li><strong>parse_id_uuid</strong> – if ‘pk’ (‘uuid’) expects an integer (uuid starting pattern)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">resource_type (string)
page (integer)
node_id (string: uuid starting pattern, int: pk)
query_type (string))</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiida.restapi.common.utils.Utils.parse_query_string">
<code class="descname">parse_query_string</code><span class="sig-paren">(</span><em>query_string</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/restapi/common/utils.html#Utils.parse_query_string"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.utils.Utils.parse_query_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that parse the querystring, extracting infos for limit, offset,
ordering, filters, attribute and extra projections.
:param query_string (as obtained from request.query_string)
:return: parsed values for the querykeys</p>
</dd></dl>

<dl class="staticmethod">
<dt id="aiida.restapi.common.utils.Utils.split_path">
<em class="property">static </em><code class="descname">split_path</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/restapi/common/utils.html#Utils.split_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.utils.Utils.split_path" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> – entire path contained in flask request</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">list of each element separated by ‘/’</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiida.restapi.common.utils.Utils.strip_api_prefix">
<code class="descname">strip_api_prefix</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/restapi/common/utils.html#Utils.strip_api_prefix"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.utils.Utils.strip_api_prefix" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes the PREFIX from an URL path. PREFIX must be defined in the
config.py file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PREFIX</span> <span class="o">=</span> <span class="s2">&quot;/api/v2&quot;</span>
<span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;/api/v2/calculations/page/2&quot;</span>
<span class="n">strip_api_prefix</span><span class="p">(</span><span class="n">path</span><span class="p">)</span> <span class="o">==&gt;</span> <span class="s2">&quot;/calculations/page/2&quot;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> – the URL path string</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">the same URL without the prefix</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="aiida.restapi.common.utils.Utils.validate_request">
<code class="descname">validate_request</code><span class="sig-paren">(</span><em>limit=None</em>, <em>offset=None</em>, <em>perpage=None</em>, <em>page=None</em>, <em>query_type=None</em>, <em>is_querystring_defined=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/restapi/common/utils.html#Utils.validate_request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.utils.Utils.validate_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs various checks on the consistency of the request.
Add here all the checks that you want to do, except validity of the page
number that is done in paginate().
Future additional checks must be added here</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="aiida.restapi.common.utils.list_routes">
<code class="descclassname">aiida.restapi.common.utils.</code><code class="descname">list_routes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/restapi/common/utils.html#list_routes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.restapi.common.utils.list_routes" title="Permalink to this definition">¶</a></dt>
<dd><p>List available routes</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>