

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aiida.backends.sqlalchemy package &mdash; AiiDA 1.0.0b2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/contentui.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../install/quick_installation.html">Quick installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/updating_installation.html">Updating AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../install/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../get_started/index.html">First things first</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/daemon.html">Setup the daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/computers.html">Setup a computer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/codes.html">Setup a code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/plugins.html">Plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/provenance.html">Provenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/calculations.html">Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/workflows.html">Workflows</a></li>
</ul>
<p class="caption"><span class="caption-text">Working with</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../working/processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working/functions.html">Calculation and work functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working/calculations.html">Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working/workflows.html">Workflows</a></li>
</ul>
<p class="caption"><span class="caption-text">Working with AiiDA</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html">Command line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#scripting">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#data-types">Data types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#groups">Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#schedulers">Schedulers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#querying-data">Querying data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#caching">Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#result-manager">Result manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#backups">Backups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#rest-api">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#cookbook">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../import_export/index.html">Import and Export</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/index.html">AiiDA design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/index.html#aiida-core">AiiDA core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/index.html#aiida-plugins">AiiDA plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">StructureData</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html#pseudopotentials">Pseudopotentials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html#plugin-development">Plugin development</a></li>
</ul>
<p class="caption"><span class="caption-text">API reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="`aiida package &lt;https://aiida-core.readthedocs.io/en/latest/apidoc/aiida.html&gt;`_">`aiida package &lt;https://aiida-core.readthedocs.io/en/latest/apidoc/aiida.html&gt;`_</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>aiida.backends.sqlalchemy package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/apidoc/aiida.backends.sqlalchemy.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-aiida.backends.sqlalchemy">
<span id="aiida-backends-sqlalchemy-package"></span><h1>aiida.backends.sqlalchemy package<a class="headerlink" href="#module-aiida.backends.sqlalchemy" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="aiida.backends.sqlalchemy.get_scoped_session">
<code class="descclassname">aiida.backends.sqlalchemy.</code><code class="descname">get_scoped_session</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy.html#get_scoped_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.get_scoped_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a scoped session</p>
<p>According to SQLAlchemy docs, this returns always the same object within a thread, and a different object in a
different thread. Moreover, since we update the session class upon forking, different session objects will be used.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.recreate_after_fork">
<code class="descclassname">aiida.backends.sqlalchemy.</code><code class="descname">recreate_after_fork</code><span class="sig-paren">(</span><em>engine</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy.html#recreate_after_fork"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.recreate_after_fork" title="Permalink to this definition">¶</a></dt>
<dd><p>Callback called after a fork.</p>
<p>Not only disposes the engine, but also recreates a new scoped session to use independent sessions in the fork.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>engine</strong> – the engine that will be used by the sessionmaker</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.reset_session">
<code class="descclassname">aiida.backends.sqlalchemy.</code><code class="descname">reset_session</code><span class="sig-paren">(</span><em>profile=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy.html#reset_session"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.reset_session" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets (global) engine and sessionmaker classes, to create a new one
(or creates a new one from scratch if not already available)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>profile</strong> – the profile whose configuration to use to connect to the database</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="aiida.backends.sqlalchemy.migrations.html">aiida.backends.sqlalchemy.migrations package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="aiida.backends.sqlalchemy.migrations.html#subpackages">Subpackages</a><ul>
<li class="toctree-l3"><a class="reference internal" href="aiida.backends.sqlalchemy.migrations.versions.html">aiida.backends.sqlalchemy.migrations.versions package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="aiida.backends.sqlalchemy.migrations.versions.html#module-aiida.backends.sqlalchemy.migrations.versions.041a79fc615f_dblog_cleaning">Submodules</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="aiida.backends.sqlalchemy.migrations.html#module-aiida.backends.sqlalchemy.migrations.env">Submodules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="aiida.backends.sqlalchemy.models.html">aiida.backends.sqlalchemy.models package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="aiida.backends.sqlalchemy.models.html#module-aiida.backends.sqlalchemy.models.authinfo">Submodules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="aiida.backends.sqlalchemy.tests.html">aiida.backends.sqlalchemy.tests package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="aiida.backends.sqlalchemy.tests.html#module-aiida.backends.sqlalchemy.tests.test_generic">Submodules</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section" id="module-aiida.backends.sqlalchemy.alembic_manage">
<span id="submodules"></span><h2>Submodules<a class="headerlink" href="#module-aiida.backends.sqlalchemy.alembic_manage" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-aiida.backends.sqlalchemy.globalsettings"></span><p>Functions to manage the global settings stored in the DB (in the DbSettings
table.</p>
<dl class="function">
<dt id="aiida.backends.sqlalchemy.globalsettings.del_global_setting">
<code class="descclassname">aiida.backends.sqlalchemy.globalsettings.</code><code class="descname">del_global_setting</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/globalsettings.html#del_global_setting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.globalsettings.del_global_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the value of the given setting, or raise a KeyError if the
setting is not present in the DB.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><strong>KeyError</strong> – if the setting does not exist in the DB</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.globalsettings.get_global_setting">
<code class="descclassname">aiida.backends.sqlalchemy.globalsettings.</code><code class="descname">get_global_setting</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/globalsettings.html#get_global_setting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.globalsettings.get_global_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the value of the given setting, or raise a KeyError if the
setting is not present in the DB.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><strong>KeyError</strong> – if the setting does not exist in the DB</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.globalsettings.get_global_setting_description">
<code class="descclassname">aiida.backends.sqlalchemy.globalsettings.</code><code class="descname">get_global_setting_description</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/globalsettings.html#get_global_setting_description"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.globalsettings.get_global_setting_description" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the description for the given setting variable, as stored in the
DB, or raise a KeyError if the setting is not present in the DB or the
table doesn’t exist.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.globalsettings.set_global_setting">
<code class="descclassname">aiida.backends.sqlalchemy.globalsettings.</code><code class="descname">set_global_setting</code><span class="sig-paren">(</span><em>key</em>, <em>value</em>, <em>description=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/globalsettings.html#set_global_setting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.globalsettings.set_global_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a global setting in the DbSetting table (therefore, stored at the DB
level).</p>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.globalsettings.table_check_test">
<code class="descclassname">aiida.backends.sqlalchemy.globalsettings.</code><code class="descname">table_check_test</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/globalsettings.html#table_check_test"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.globalsettings.table_check_test" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if the db_setting table exists in the database. If it doesn’t exist
it rainses a KeyError.</p>
</dd></dl>

<span class="target" id="module-aiida.backends.sqlalchemy.queries"></span><dl class="class">
<dt id="aiida.backends.sqlalchemy.queries.SqlaQueryManager">
<em class="property">class </em><code class="descclassname">aiida.backends.sqlalchemy.queries.</code><code class="descname">SqlaQueryManager</code><span class="sig-paren">(</span><em>backend</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/queries.html#SqlaQueryManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.queries.SqlaQueryManager" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="aiida.backends.general.html#aiida.backends.general.abstractqueries.AbstractQueryManager" title="aiida.backends.general.abstractqueries.AbstractQueryManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.backends.general.abstractqueries.AbstractQueryManager</span></code></a></p>
<p>SQLAlchemy implementation of custom queries, for efficiency reasons</p>
<dl class="attribute">
<dt id="aiida.backends.sqlalchemy.queries.SqlaQueryManager.__abstractmethods__">
<code class="descname">__abstractmethods__</code><em class="property"> = frozenset()</em><a class="headerlink" href="#aiida.backends.sqlalchemy.queries.SqlaQueryManager.__abstractmethods__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.queries.SqlaQueryManager.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>backend</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/queries.html#SqlaQueryManager.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.queries.SqlaQueryManager.__init__" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>backend</strong> (<a class="reference internal" href="aiida.orm.implementation.sql.html#aiida.orm.implementation.sql.SqlBackend" title="aiida.orm.implementation.sql.SqlBackend"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.implementation.sql.SqlBackend</span></code></a>) – The AiiDA backend</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="aiida.backends.sqlalchemy.queries.SqlaQueryManager.__module__">
<code class="descname">__module__</code><em class="property"> = 'aiida.backends.sqlalchemy.queries'</em><a class="headerlink" href="#aiida.backends.sqlalchemy.queries.SqlaQueryManager.__module__" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="aiida.backends.sqlalchemy.queries.SqlaQueryManager._abc_impl">
<code class="descname">_abc_impl</code><em class="property"> = &lt;_abc_data object&gt;</em><a class="headerlink" href="#aiida.backends.sqlalchemy.queries.SqlaQueryManager._abc_impl" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="aiida.backends.sqlalchemy.queries.SqlaQueryManager.get_creation_statistics">
<code class="descname">get_creation_statistics</code><span class="sig-paren">(</span><em>user_pk=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/queries.html#SqlaQueryManager.get_creation_statistics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.queries.SqlaQueryManager.get_creation_statistics" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a dictionary with the statistics of node creation, summarized by day,
optimized for the Django backend.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Note:</th><td class="field-body">Days when no nodes were created are not present in the returned <cite>ctime_by_day</cite> dictionary.</td>
</tr>
<tr class="field-even field"><th class="field-name">Parameters:</th><td class="field-body"><strong>user_pk</strong> – If None (default), return statistics for all users.
If user pk is specified, return only the statistics for the given user.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a dictionary as
follows:<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;total&quot;</span><span class="p">:</span> <span class="n">TOTAL_NUM_OF_NODES</span><span class="p">,</span>
   <span class="s2">&quot;types&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">TYPESTRING1</span><span class="p">:</span> <span class="n">count</span><span class="p">,</span> <span class="n">TYPESTRING2</span><span class="p">:</span> <span class="n">count</span><span class="p">,</span> <span class="o">...</span><span class="p">},</span>
   <span class="s2">&quot;ctime_by_day&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;YYYY-MMM-DD&#39;</span><span class="p">:</span> <span class="n">count</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
</pre></div>
</div>
<p>where in <cite>ctime_by_day</cite> the key is a string in the format ‘YYYY-MM-DD’ and the value is
an integer with the number of nodes created that day.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<span class="target" id="module-aiida.backends.sqlalchemy.utils"></span><dl class="function">
<dt id="aiida.backends.sqlalchemy.utils._load_dbenv_noschemacheck">
<code class="descclassname">aiida.backends.sqlalchemy.utils.</code><code class="descname">_load_dbenv_noschemacheck</code><span class="sig-paren">(</span><em>profile</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/utils.html#_load_dbenv_noschemacheck"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.utils._load_dbenv_noschemacheck" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the database environment without checking that code and database schema versions are compatible.</p>
<p>This should ONLY be used internally, inside load_dbenv, and for schema migrations. DO NOT USE OTHERWISE!</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>profile</strong> – instance of <cite>Profile</cite> whose database to load</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.utils.check_schema_version">
<code class="descclassname">aiida.backends.sqlalchemy.utils.</code><code class="descname">check_schema_version</code><span class="sig-paren">(</span><em>profile_name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/utils.html#check_schema_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.utils.check_schema_version" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the version stored in the database is the same of the version of the code.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Raises:</th><td class="field-body"><a class="reference internal" href="aiida.common.html#aiida.common.ConfigurationError" title="aiida.common.ConfigurationError"><strong>aiida.common.ConfigurationError</strong></a> – if the two schema versions do not match</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.utils.delete_nodes_and_connections_sqla">
<code class="descclassname">aiida.backends.sqlalchemy.utils.</code><code class="descname">delete_nodes_and_connections_sqla</code><span class="sig-paren">(</span><em>pks_to_delete</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/utils.html#delete_nodes_and_connections_sqla"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.utils.delete_nodes_and_connections_sqla" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete all nodes corresponding to pks in the input.
:param pks_to_delete: A list, tuple or set of pks that should be deleted.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.utils.dumps_json">
<code class="descclassname">aiida.backends.sqlalchemy.utils.</code><code class="descname">dumps_json</code><span class="sig-paren">(</span><em>d</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/utils.html#dumps_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.utils.dumps_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Transforms all datetime object into isoformat and then returns the JSON</p>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.utils.flag_modified">
<code class="descclassname">aiida.backends.sqlalchemy.utils.</code><code class="descname">flag_modified</code><span class="sig-paren">(</span><em>instance</em>, <em>key</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/utils.html#flag_modified"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.utils.flag_modified" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper around <cite>sqlalchemy.orm.attributes.flag_modified</cite> to correctly dereference utils.ModelWrapper</p>
<p>Since SqlAlchemy 1.2.12 (and maybe earlier but not in 1.0.19) the flag_modified function will check that the
key is actually present in the instance or it will except. If we pass a model instance, wrapped in the ModelWrapper
the call will raise an InvalidRequestError. In this function that wraps the flag_modified of SqlAlchemy, we
derefence the model instance if the passed instance is actually wrapped in the ModelWrapper.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.utils.get_alembic_conf">
<code class="descclassname">aiida.backends.sqlalchemy.utils.</code><code class="descname">get_alembic_conf</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/utils.html#get_alembic_conf"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.utils.get_alembic_conf" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns the alembic configuration file contents by doing
the necessary updates in the ‘script_location’ name.
:return: The alembic configuration.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.utils.get_db_schema_version">
<code class="descclassname">aiida.backends.sqlalchemy.utils.</code><code class="descname">get_db_schema_version</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/utils.html#get_db_schema_version"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.utils.get_db_schema_version" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns the current version of the database.
:param config: The alembic configuration.
:return: The version of the database.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.utils.get_migration_head">
<code class="descclassname">aiida.backends.sqlalchemy.utils.</code><code class="descname">get_migration_head</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/utils.html#get_migration_head"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.utils.get_migration_head" title="Permalink to this definition">¶</a></dt>
<dd><p>This function returns the head of the migration scripts.
:param config: The alembic configuration.
:return: The version of the head.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.utils.get_pg_tc">
<code class="descclassname">aiida.backends.sqlalchemy.utils.</code><code class="descname">get_pg_tc</code><span class="sig-paren">(</span><em>links_table_name</em>, <em>links_table_input_field</em>, <em>links_table_output_field</em>, <em>closure_table_name</em>, <em>closure_table_parent_field</em>, <em>closure_table_child_field</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/utils.html#get_pg_tc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.utils.get_pg_tc" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the transitive closure table template</p>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.utils.install_tc">
<code class="descclassname">aiida.backends.sqlalchemy.utils.</code><code class="descname">install_tc</code><span class="sig-paren">(</span><em>session</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/utils.html#install_tc"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.utils.install_tc" title="Permalink to this definition">¶</a></dt>
<dd><p>Install the transitive closure table with SqlAlchemy.</p>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.utils.load_dbenv">
<code class="descclassname">aiida.backends.sqlalchemy.utils.</code><code class="descname">load_dbenv</code><span class="sig-paren">(</span><em>profile</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/utils.html#load_dbenv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.utils.load_dbenv" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the database environment and ensure that the code and database schema versions are compatible.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>profile</strong> – the string with the profile to use</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.utils.loads_json">
<code class="descclassname">aiida.backends.sqlalchemy.utils.</code><code class="descname">loads_json</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/utils.html#loads_json"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.utils.loads_json" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads the json and try to parse each basestring as a datetime object</p>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.utils.migrate_database">
<code class="descclassname">aiida.backends.sqlalchemy.utils.</code><code class="descname">migrate_database</code><span class="sig-paren">(</span><em>alembic_cfg=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/utils.html#migrate_database"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.utils.migrate_database" title="Permalink to this definition">¶</a></dt>
<dd><p>Migrate the database to the latest schema version.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>config</strong> – alembic configuration to use, will use default if not provided</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="aiida.backends.sqlalchemy.utils.unload_dbenv">
<code class="descclassname">aiida.backends.sqlalchemy.utils.</code><code class="descname">unload_dbenv</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/aiida/backends/sqlalchemy/utils.html#unload_dbenv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#aiida.backends.sqlalchemy.utils.unload_dbenv" title="Permalink to this definition">¶</a></dt>
<dd><p>Unload the database environment, which boils down to destroying the current engine and session.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>