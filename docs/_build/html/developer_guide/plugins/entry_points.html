

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Entry Points &mdash; AiiDA 1.0.0b2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../_static/contentui.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Documenting a plugin" href="documenting.html" />
    <link rel="prev" title="Quickstart" href="quickstart.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../install/quick_installation.html">Quick installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/updating_installation.html">Updating AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../install/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/index.html">First things first</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/daemon.html">Setup the daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/computers.html">Setup a computer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/codes.html">Setup a code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/plugins.html">Plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/provenance.html">Provenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/calculations.html">Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../concepts/workflows.html">Workflows</a></li>
</ul>
<p class="caption"><span class="caption-text">Working with</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../working/processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../working/functions.html">Calculation and work functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../working/calculations.html">Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../working/workflows.html">Workflows</a></li>
</ul>
<p class="caption"><span class="caption-text">Working with AiiDA</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../working_with_aiida/index.html">Command line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../working_with_aiida/index.html#scripting">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../working_with_aiida/index.html#data-types">Data types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../working_with_aiida/index.html#groups">Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../working_with_aiida/index.html#schedulers">Schedulers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../working_with_aiida/index.html#querying-data">Querying data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../working_with_aiida/index.html#caching">Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../working_with_aiida/index.html#result-manager">Result manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../working_with_aiida/index.html#backups">Backups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../working_with_aiida/index.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../working_with_aiida/index.html#rest-api">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../working_with_aiida/index.html#cookbook">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../import_export/index.html">Import and Export</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">AiiDA design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#aiida-core">AiiDA core</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html#aiida-plugins">AiiDA plugins</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Plugin Development</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="basics.html">Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Entry Points</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#what-is-an-entry-point">What is an Entry Point?</a></li>
<li class="toctree-l4"><a class="reference internal" href="#aiida-entry-points">AiiDA Entry Points</a></li>
<li class="toctree-l4"><a class="reference internal" href="#aiida-calculations"><code class="docutils literal notranslate"><span class="pre">aiida.calculations</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#aiida-parsers"><code class="docutils literal notranslate"><span class="pre">aiida.parsers</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#aiida-data"><code class="docutils literal notranslate"><span class="pre">aiida.data</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#aiida-workflows"><code class="docutils literal notranslate"><span class="pre">aiida.workflows</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#aiida-cmdline"><code class="docutils literal notranslate"><span class="pre">aiida.cmdline</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#aiida-tools-dbexporters"><code class="docutils literal notranslate"><span class="pre">aiida.tools.dbexporters</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#aiida-tools-dbimporters"><code class="docutils literal notranslate"><span class="pre">aiida.tools.dbimporters</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#aiida-schedulers"><code class="docutils literal notranslate"><span class="pre">aiida.schedulers</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#aiida-transports"><code class="docutils literal notranslate"><span class="pre">aiida.transports</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="documenting.html">Documenting a plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="publish.html">Publishing a plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="update_plugin.html">Updating an Existing Plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin_system.html">The AiiDA Plugin System</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../devel_tutorial/code_plugin_float_sum.html">Data plugin - Float Summation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devel_tutorial/plugin_tests.html">Writing tests for plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devel_tutorial/cmdline_plugin.html">Commandline plugin - Data subcommand</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devel_tutorial/parser_warnings_policy.html">Parser warnings policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aiida_sphinxext.html">AiiDA Sphinx extension</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html">StructureData</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html#pseudopotentials">Pseudopotentials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/index.html#plugin-development">Plugin development</a></li>
</ul>
<p class="caption"><span class="caption-text">API reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="`aiida package &lt;https://aiida-core.readthedocs.io/en/latest/apidoc/aiida.html&gt;`_">`aiida package &lt;https://aiida-core.readthedocs.io/en/latest/apidoc/aiida.html&gt;`_</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">AiiDA design</a> &raquo;</li>
        
          <li><a href="index.html">Plugin Development</a> &raquo;</li>
        
      <li>Entry Points</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/developer_guide/plugins/entry_points.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="entry-points">
<span id="plugins-entry-points"></span><h1>Entry Points<a class="headerlink" href="#entry-points" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-an-entry-point">
<h2>What is an Entry Point?<a class="headerlink" href="#what-is-an-entry-point" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> package to which <code class="docutils literal notranslate"><span class="pre">pip</span></code> is a frontend has a feature called
<a class="reference external" href="https://setuptools.readthedocs.io/en/latest/setuptools.html#dynamic-discovery-of-services-and-plugins">entry points</a>.
When a distribution which registers entry points is installed,
the entry point specifications are written to a file inside the distribution’s
<code class="docutils literal notranslate"><span class="pre">.egg-info</span></code> folder. <code class="docutils literal notranslate"><span class="pre">setuptools</span></code> provides a package <code class="docutils literal notranslate"><span class="pre">pkg_resources</span></code> which
can find these entry points by distribution, group and/or name and load the
data structure to which it points.</p>
<p>This is the way AiiDA finds and loads classes provided by plugins.</p>
</div>
<div class="section" id="aiida-entry-points">
<h2>AiiDA Entry Points<a class="headerlink" href="#aiida-entry-points" title="Permalink to this headline">¶</a></h2>
<p>This document contains a list of entry point groups AiiDA uses, with an example
usage for each.
In the following, we assume the following folder structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">aiida</span><span class="o">-</span><span class="n">mycode</span><span class="o">/</span>           <span class="o">-</span> <span class="n">distribution</span> <span class="n">folder</span>
   <span class="n">aiida_mycode</span><span class="o">/</span>        <span class="o">-</span> <span class="n">toplevel</span> <span class="n">package</span> <span class="p">(</span><span class="kn">from</span> <span class="nn">aiida_myplug</span> <span class="k">import</span> <span class="o">..</span><span class="p">)</span>
      <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
      <span class="n">calcs</span><span class="o">/</span>
         <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
         <span class="n">mycode</span><span class="o">.</span><span class="n">py</span>      <span class="o">-</span> <span class="n">contains</span> <span class="n">MycodeCalculation</span>
      <span class="n">parsers</span><span class="o">/</span>
         <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
         <span class="n">mycode</span><span class="o">.</span><span class="n">py</span>      <span class="o">-</span> <span class="n">contains</span> <span class="n">MycodeParser</span>
      <span class="n">data</span><span class="o">/</span>
         <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
         <span class="n">mydat</span><span class="o">.</span><span class="n">py</span>       <span class="o">-</span> <span class="n">contains</span> <span class="n">MyData</span> <span class="p">(</span><span class="n">supports</span> <span class="n">code</span> <span class="n">specific</span> <span class="nb">format</span><span class="p">)</span>
      <span class="n">commands</span><span class="o">/</span>
         <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
         <span class="n">mydat</span><span class="o">.</span><span class="n">py</span>       <span class="o">-</span> <span class="n">contains</span> <span class="n">visualization</span> <span class="n">subcommand</span> <span class="k">for</span> <span class="n">MyData</span>
      <span class="n">workflows</span><span class="o">/</span>
         <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
         <span class="n">mywf</span><span class="o">.</span><span class="n">py</span>        <span class="o">-</span> <span class="n">contains</span> <span class="n">a</span> <span class="n">basic</span> <span class="n">workflow</span> <span class="n">using</span> <span class="n">mycode</span>
      <span class="o">...</span>
   <span class="n">setup</span><span class="o">.</span><span class="n">py</span>             <span class="o">-</span> <span class="n">install</span> <span class="n">script</span>
   <span class="n">setup</span><span class="o">.</span><span class="n">json</span>           <span class="o">-</span> <span class="n">install</span> <span class="n">configuration</span>
   <span class="o">...</span>
</pre></div>
</div>
<p>For a plugin that uses this folder structure, see the  <a class="reference external" href="https://github.com/aiidateam/aiida-plugin-template">aiida plugin template</a>.</p>
<p>Note, however, that the folder structure inside <code class="docutils literal notranslate"><span class="pre">aiida-mycode/</span></code> is entirely up to you.
A very simple plugin might look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">aiida</span><span class="o">-</span><span class="n">mysimple</span><span class="o">/</span>
   <span class="n">aiida_mysimple</span><span class="o">/</span>
      <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
      <span class="n">simpledata</span><span class="o">.</span><span class="n">py</span>
   <span class="n">setup</span><span class="o">.</span><span class="n">py</span>
   <span class="n">setup</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
<p>The plugin has to tell AiiDA where to look for the classes to be used as
calculations, parsers, transports, etc. This is done inside <code class="docutils literal notranslate"><span class="pre">setup.json</span></code> by way
of the <code class="docutils literal notranslate"><span class="pre">entry_points</span></code> keyword:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">...</span>
<span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
   <span class="o">&lt;</span><span class="n">Entry</span> <span class="n">Point</span> <span class="n">Group</span><span class="o">&gt;</span><span class="p">:</span> <span class="p">[</span>
      <span class="o">&lt;</span><span class="n">Entry</span> <span class="n">Point</span> <span class="n">Specification</span><span class="o">&gt;</span><span class="p">,</span>
      <span class="o">...</span>
   <span class="p">],</span>
<span class="o">...</span>
</pre></div>
</div>
<p>It is given as a dictionary containing entry point group names as keywords. The list for each entry point group contains entry point specifications.</p>
<p>A specification in turn is given as a string and consists of two parts, a name and an import path describing where the class is to be imported from. The two parts are sparated by an <cite>=</cite> sign:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;mycode.mydat = aiida_mycode.data.mydat:MyData&quot;</span>
</pre></div>
</div>
<p>We <em>strongly</em> suggest to start the name of each entry point with the name of
the plugin, ommitting the leading ‘aiida-‘.
In our example this leads to entry specifications like <code class="docutils literal notranslate"><span class="pre">&quot;mycode.&lt;any.you.want&gt;</span> <span class="pre">=</span> <span class="pre">&lt;module.path:class&gt;&quot;</span></code>, just like the above example.
Exceptions to this rule are schedulers, transports and potentially data ones. Further exceptions can be tolerated in order to provide backwards compatibility if the plugin was in use before aiida-0.9 and its modules were installed in locations which does not make it possible to follow this rule.</p>
<p>Below, a list of valid entry points recognized by AiiDA follows.</p>
</div>
<div class="section" id="aiida-calculations">
<h2><code class="docutils literal notranslate"><span class="pre">aiida.calculations</span></code><a class="headerlink" href="#aiida-calculations" title="Permalink to this headline">¶</a></h2>
<p>Entry points in this group are expected to be subclasses of <a class="reference internal" href="../../apidoc/aiida.orm.nodes.process.calculation.html#aiida.orm.nodes.process.calculation.calcjob.CalcJobNode" title="aiida.orm.nodes.process.calculation.calcjob.CalcJobNode"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiida.orm.JobCalculation</span></code></a>. This replaces the previous method of placing a python module with the class in question inside the <code class="docutils literal notranslate"><span class="pre">aiida/orm/calculation/job</span></code> subpackage.</p>
<p>Example entry point specification:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
   <span class="s2">&quot;aiida.calculations&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;mycode.mycode = aiida_mycode.calcs.mycode:MycodeCalculation&quot;</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">aiida_mycode/calcs/mycode.py</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiida.orm</span> <span class="k">import</span> <span class="n">JobCalculation</span>
<span class="k">class</span> <span class="nc">MycodeCalculation</span><span class="p">(</span><span class="n">JobCalculation</span><span class="p">):</span>
   <span class="o">...</span>
</pre></div>
</div>
<p>Will lead to usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiida.plugins</span> <span class="k">import</span> <span class="n">CalculationFactory</span>
<span class="n">calc</span> <span class="o">=</span> <span class="n">CalculationFactory</span><span class="p">(</span><span class="s1">&#39;mycode.mycode&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="aiida-parsers">
<h2><code class="docutils literal notranslate"><span class="pre">aiida.parsers</span></code><a class="headerlink" href="#aiida-parsers" title="Permalink to this headline">¶</a></h2>
<p>Aiida expects a subclass of <code class="docutils literal notranslate"><span class="pre">Parser</span></code>. Replaces the previous approach consisting in placing a parser module under <code class="docutils literal notranslate"><span class="pre">aiida/parsers/plugins</span></code>.</p>
<p>Example spec:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
   <span class="s2">&quot;aiida.calculations&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;mycode.mycode = aiida_mycode.parsers.mycode:MycodeParser&quot;</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">aida_mycode/parsers/myparser.py</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiida.parsers</span> <span class="k">import</span> <span class="n">Parser</span>
<span class="k">class</span> <span class="nc">MycodeParser</span><span class="p">(</span><span class="n">Parser</span><span class="p">)</span>
   <span class="o">...</span>
</pre></div>
</div>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiida.plugins</span> <span class="k">import</span> <span class="n">ParserFactory</span>
<span class="n">parser</span> <span class="o">=</span> <span class="n">ParserFactory</span><span class="p">(</span><span class="s1">&#39;mycode.mycode&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="aiida-data">
<h2><code class="docutils literal notranslate"><span class="pre">aiida.data</span></code><a class="headerlink" href="#aiida-data" title="Permalink to this headline">¶</a></h2>
<p>Group for <a class="reference internal" href="../../apidoc/aiida.orm.nodes.data.html#aiida.orm.nodes.data.data.Data" title="aiida.orm.nodes.data.data.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Data</span></code></a> subclasses. Previously located in a subpackage of <code class="docutils literal notranslate"><span class="pre">aiida/orm/data</span></code>.</p>
<p>Spec:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
   <span class="s2">&quot;aiida.data&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;mycode.mydata = aiida_mycode.data.mydat:MyData&quot;</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">aiida_mycode/data/mydat.py</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiida.orm</span> <span class="k">import</span> <span class="n">Data</span>
<span class="k">class</span> <span class="nc">MyData</span><span class="p">(</span><span class="n">Data</span><span class="p">):</span>
   <span class="o">...</span>
</pre></div>
</div>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiida.plugins</span> <span class="k">import</span> <span class="n">DataFactory</span>
<span class="n">params</span> <span class="o">=</span> <span class="n">DataFactory</span><span class="p">(</span><span class="s1">&#39;mycode.mydata&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="aiida-workflows">
<h2><code class="docutils literal notranslate"><span class="pre">aiida.workflows</span></code><a class="headerlink" href="#aiida-workflows" title="Permalink to this headline">¶</a></h2>
<p>For AiiDA workflows. Instead of putting a workflow somewhere under the <code class="docutils literal notranslate"><span class="pre">aiida.workflows</span></code> package, it can now be packaged as a plugin and exposed to aiida as follows:</p>
<p>Spec:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
   <span class="s2">&quot;aiida.workflows&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;mycode.mywf = aiida_mycode.workflows.mywf:MyWorkflow&quot;</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">aiida_mycode/workflows/mywf.py</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiida.engine.workchain</span> <span class="k">import</span> <span class="n">WorkChain</span>
<span class="k">class</span> <span class="nc">MyWorkflow</span><span class="p">(</span><span class="n">WorkChain</span><span class="p">):</span>
   <span class="o">...</span>
</pre></div>
</div>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiida.plugins</span> <span class="k">import</span> <span class="n">WorkflowFactory</span>
<span class="n">wf</span> <span class="o">=</span> <span class="n">WorkflowFactory</span><span class="p">(</span><span class="s1">&#39;mycode.mywf&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For old-style workflows the entry point mechanism of the plugin system is not supported.
Therefore one cannot load these workflows with the <code class="docutils literal notranslate"><span class="pre">WorkflowFactory</span></code>.
The only way to run these, is to store their source code in the <code class="docutils literal notranslate"><span class="pre">aiida/workflows/user</span></code> directory and use normal python imports to load the classes.</p>
</div>
</div>
<div class="section" id="aiida-cmdline">
<h2><code class="docutils literal notranslate"><span class="pre">aiida.cmdline</span></code><a class="headerlink" href="#aiida-cmdline" title="Permalink to this headline">¶</a></h2>
<p>For subcommands to verdi commands like <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">data</span> <span class="pre">mydata</span></code>. This was previously not possible to achieve without editing aiida source code directly. AiiDA expects each entry point to be either a <code class="docutils literal notranslate"><span class="pre">click.Command</span></code> or <code class="docutils literal notranslate"><span class="pre">click.CommandGroup</span></code>.</p>
<p>Plugin support for commands is possible due to using <a class="reference external" href="https://click.pocoo.org/6/">click</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In aiida-0.9, the subcommand in question is not yet exposed to <code class="docutils literal notranslate"><span class="pre">verdi</span></code>. There is a <a class="reference external" href="https://github.com/DropD/aiida-verdi">aiida-verdi</a> package that is being developed to implement such functionality (experimental yet). The command will then be called <code class="docutils literal notranslate"><span class="pre">verdi-exp</span> <span class="pre">data</span> <span class="pre">mydata</span></code> instead.</p>
</div>
<p>Spec:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
   <span class="s2">&quot;aiida.cmdline.data&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;mydata = aiida_mycode.commands.mydata:mydata&quot;</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">aiida_mycode/commands/mydata.py</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
<span class="n">mydata</span><span class="p">():</span>
   <span class="sd">&quot;&quot;&quot;commandline help for mydata command&quot;&quot;&quot;</span>

<span class="nd">@mydata</span><span class="o">.</span><span class="n">command</span><span class="p">(</span><span class="s1">&#39;animate&#39;</span><span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s1">&#39;--format&#39;</span><span class="p">)</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">argument</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span>
<span class="n">create_fancy_animation</span><span class="p">(</span><span class="nb">format</span><span class="p">,</span> <span class="n">pk</span><span class="p">):</span>
   <span class="sd">&quot;&quot;&quot;help&quot;&quot;&quot;</span>
   <span class="o">...</span>
</pre></div>
</div>
<p>Usage:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>verdi data mydata animate --format<span class="o">=</span>Format PK
</pre></div>
</div>
</div>
<div class="section" id="aiida-tools-dbexporters">
<h2><code class="docutils literal notranslate"><span class="pre">aiida.tools.dbexporters</span></code><a class="headerlink" href="#aiida-tools-dbexporters" title="Permalink to this headline">¶</a></h2>
<p>If your plugin adds support for exporting to an external database, use this entry point to have aiida find the module where you define the necessary functions.</p>
</div>
<div class="section" id="aiida-tools-dbimporters">
<h2><code class="docutils literal notranslate"><span class="pre">aiida.tools.dbimporters</span></code><a class="headerlink" href="#aiida-tools-dbimporters" title="Permalink to this headline">¶</a></h2>
<p>If your plugin adds support for importing from an external database, use this entry point to have aiida find the module where you define the necessary functions.</p>
</div>
<div class="section" id="aiida-schedulers">
<h2><code class="docutils literal notranslate"><span class="pre">aiida.schedulers</span></code><a class="headerlink" href="#aiida-schedulers" title="Permalink to this headline">¶</a></h2>
<p>For scheduler plugins. Note that the entry point name is not prefixed by the plugin name. This is because typically a scheduler should be distributed in a plugin on its own, and only one plugin per scheduler should be necessary.</p>
<p>Spec:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
   <span class="s2">&quot;aiida.schedulers&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;myscheduler = aiida_myscheduler.myscheduler:MyScheduler&quot;</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">aiida_myscheduler/myscheduler.py</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiida.schedulers</span> <span class="k">import</span> <span class="n">Scheduler</span>
<span class="k">class</span> <span class="nc">MyScheduler</span><span class="p">(</span><span class="n">Scheduler</span><span class="p">):</span>
   <span class="o">...</span>
</pre></div>
</div>
<p>Usage: The scheduler is used in the familiar way by entering ‘myscheduler’ as the scheduler option when setting up a computer.</p>
</div>
<div class="section" id="aiida-transports">
<h2><code class="docutils literal notranslate"><span class="pre">aiida.transports</span></code><a class="headerlink" href="#aiida-transports" title="Permalink to this headline">¶</a></h2>
<p>Like schedulers, transports are supposed to be distributed in a separate plugin. Therefore we will again omit the plugin’s name in the entry point name.</p>
<p>Spec:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">entry_points</span><span class="o">=</span><span class="p">{</span>
   <span class="s2">&quot;aiida.transports&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;mytransport = aiida_mytransport.mytransport:MyTransport&quot;</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">aiida_mytransport/mytransport.py</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiida.transports</span> <span class="k">import</span> <span class="n">Transport</span>
<span class="k">class</span> <span class="nc">MyTransport</span><span class="p">(</span><span class="n">Transport</span><span class="p">):</span>
   <span class="o">...</span>
</pre></div>
</div>
<p>Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">aiida.plugins</span> <span class="k">import</span> <span class="n">TransportFactory</span>
<span class="n">transport</span> <span class="o">=</span> <span class="n">TransportFactory</span><span class="p">(</span><span class="s1">&#39;mytransport&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Jus like one would expect, when a computer is setup, <code class="docutils literal notranslate"><span class="pre">mytransport</span></code> can be given as the transport option.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="documenting.html" class="btn btn-neutral float-right" title="Documenting a plugin" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="quickstart.html" class="btn btn-neutral float-left" title="Quickstart" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>