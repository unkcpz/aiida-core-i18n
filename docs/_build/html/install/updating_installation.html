

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Updating AiiDA &mdash; AiiDA 1.0.0b2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/contentui.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Troubleshooting" href="troubleshooting.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quick_installation.html">Quick installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Updating AiiDA</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#version-migration-instructions">Version migration instructions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#updating-from-0-12-to-1-0">Updating from 0.12.* to 1.0</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#configuration-file">Configuration file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#updating-from-older-versions">Updating from older versions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#backward-incompatible-changes-in-v1-0-0">Backward incompatible changes in <code class="docutils literal notranslate"><span class="pre">v1.0.0</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../get_started/index.html">First things first</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/daemon.html">Setup the daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/computers.html">Setup a computer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/codes.html">Setup a code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../get_started/plugins.html">Plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../concepts/provenance.html">Provenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/calculations.html">Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../concepts/workflows.html">Workflows</a></li>
</ul>
<p class="caption"><span class="caption-text">Working with</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../working/processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working/functions.html">Calculation and work functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working/calculations.html">Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working/workflows.html">Workflows</a></li>
</ul>
<p class="caption"><span class="caption-text">Working with AiiDA</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html">Command line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#scripting">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#data-types">Data types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#groups">Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#schedulers">Schedulers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#querying-data">Querying data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#caching">Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#result-manager">Result manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#backups">Backups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#rest-api">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../working_with_aiida/index.html#cookbook">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../import_export/index.html">Import and Export</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/index.html">AiiDA design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/index.html#aiida-core">AiiDA core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_guide/index.html#aiida-plugins">AiiDA plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">StructureData</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html#pseudopotentials">Pseudopotentials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html#plugin-development">Plugin development</a></li>
</ul>
<p class="caption"><span class="caption-text">API reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="`aiida package &lt;https://aiida-core.readthedocs.io/en/latest/apidoc/aiida.html&gt;`_">`aiida package &lt;https://aiida-core.readthedocs.io/en/latest/apidoc/aiida.html&gt;`_</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Updating AiiDA</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/install/updating_installation.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="updating-aiida">
<span id="updating-installation"></span><span id="id1"></span><h1>Updating AiiDA<a class="headerlink" href="#updating-aiida" title="Permalink to this headline">¶</a></h1>
<p>Before you update your AiiDA installation, please:</p>
<ul class="simple">
<li>Enter the python environment where AiiDA is installed</li>
<li>Stop your daemon by executing <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">daemon</span> <span class="pre">stop</span></code></li>
<li>Create a backup of your database(s) by following the guidelines in the <a class="reference internal" href="../backup/index.html#backup"><span class="std std-ref">backup section</span></a></li>
<li>Create a backup of the <code class="docutils literal notranslate"><span class="pre">~/.aiida</span></code> folder (where configuration files are stored)</li>
</ul>
<p>If you have installed AiiDA through <code class="docutils literal notranslate"><span class="pre">pip</span></code> run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">--</span><span class="n">upgrade</span> <span class="n">aiida</span><span class="o">-</span><span class="n">core</span>
</pre></div>
</div>
<p>If you have installed AiiDA from a local clone of the <code class="docutils literal notranslate"><span class="pre">aiida_core</span></code>
repository, enter the directory of the local clone and run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">find</span> <span class="o">.</span> <span class="o">-</span><span class="n">name</span> <span class="s2">&quot;*.pyc&quot;</span> <span class="o">-</span><span class="nb">type</span> <span class="n">f</span> <span class="o">-</span><span class="n">delete</span>  <span class="c1"># deletes pre-compiled python files</span>
<span class="n">git</span> <span class="n">checkout</span> <span class="o">&lt;</span><span class="n">desired</span><span class="o">-</span><span class="n">branch</span><span class="o">&gt;</span>
<span class="n">git</span> <span class="n">pull</span>
<span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span>
</pre></div>
</div>
<p>After upgrading AiiDA, you may need to migrate your AiiDA database to the latest
version of the schema.
If migrations are required, running any <code class="docutils literal notranslate"><span class="pre">verdi</span></code> command will automatically raise an exception
and print the instructions for performing the <a class="reference internal" href="#update-migrations"><span class="std std-ref">migrations</span></a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>aiida.common.exceptions.ConfigurationError: Database schema version <span class="m">1</span>.0.19 is outdated compared to the code schema version <span class="m">1</span>.0.20
To migrate the database to the current version, run the following commands:
  verdi -p quicksetup daemon stop
  verdi -p quicksetup database migrate
</pre></div>
</div>
<p>Once the migrations have been performed, start the daemon and you are done.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Each version increase may come with its own necessary migrations and you should
only ever update the version by one at a time.
Therefore, first get the version number from <code class="docutils literal notranslate"><span class="pre">verdi</span> <span class="pre">--version</span></code></p>
</div>
<div class="section" id="version-migration-instructions">
<span id="update-migrations"></span><h2>Version migration instructions<a class="headerlink" href="#version-migration-instructions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="updating-from-0-12-to-1-0">
<h3>Updating from 0.12.* to 1.0<a class="headerlink" href="#updating-from-0-12-to-1-0" title="Permalink to this headline">¶</a></h3>
<div class="section" id="configuration-file">
<h4>Configuration file<a class="headerlink" href="#configuration-file" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li>The tab-completion activation for <code class="docutils literal notranslate"><span class="pre">verdi</span></code> has changed, simply replace the <code class="docutils literal notranslate"><span class="pre">eval</span> <span class="pre">&quot;$(verdi</span> <span class="pre">completioncommand)&quot;</span></code> line in your activation script with <code class="docutils literal notranslate"><span class="pre">eval</span> <span class="pre">&quot;$(_VERDI_COMPLETE=source</span> <span class="pre">verdi)&quot;</span></code></li>
</ul>
</div>
</div>
<div class="section" id="updating-from-older-versions">
<h3>Updating from older versions<a class="headerlink" href="#updating-from-older-versions" title="Permalink to this headline">¶</a></h3>
<p>To find the update instructions for older versions of AiiDA follow the following links to the documentation of the corresponding version:</p>
<ul class="simple">
<li><a class="reference external" href="https://aiida-core.readthedocs.io/en/v0.12.2/installation/updating.html#updating-from-0-11-to-0-12-0">0.11.*</a></li>
<li><a class="reference external" href="http://aiida-core.readthedocs.io/en/v0.10.0/installation/updating.html#updating-from-0-9-to-0-10-0">0.10.*</a></li>
<li><a class="reference external" href="http://aiida-core.readthedocs.io/en/v0.10.0/installation/updating.html#updating-from-0-9-to-0-10-0">0.9.*</a></li>
<li><a class="reference external" href="http://aiida-core.readthedocs.io/en/v0.9.1/installation/index.html#updating-from-0-8-django-to-0-9-0-django">0.8.* Django</a></li>
<li><a class="reference external" href="http://aiida-core.readthedocs.io/en/v0.8.1/installation/index.html#updating-from-0-7-0-django-to-0-8-0-django">0.7.* Django</a></li>
<li><a class="reference external" href="http://aiida-core.readthedocs.io/en/v0.7.0/installation.html#updating-from-0-6-0-django-to-0-7-0-django">0.6.* Django</a></li>
<li><a class="reference external" href="http://aiida-core.readthedocs.io/en/v0.7.0/installation.html#updating-from-0-6-0-django-to-0-7-0-sqlalchemy">0.6.* SqlAlchemy</a></li>
<li><a class="reference external" href="http://aiida-core.readthedocs.io/en/v0.7.0/installation.html#updating-from-0-5-0-to-0-6-0">0.5.* Django</a></li>
<li><a class="reference external" href="http://aiida-core.readthedocs.io/en/v0.5.0/installation.html#updating-from-0-4-1-to-0-5-0">0.4.* Django</a></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Since AiiDA <code class="docutils literal notranslate"><span class="pre">0.9.0</span></code>, we use Alembic for the database migrations of the
SQLAlchemy backend. In case you were using SQLAlchemy before the introduction
of Alembic, you may experience problems during your first migration. If it is
the case, please see <a class="reference internal" href="../developer_guide/core/modifying_the_schema.html#first-alembic-migration"><span class="std std-ref">this section</span></a>.</p>
</div>
</div>
</div>
<div class="section" id="backward-incompatible-changes-in-v1-0-0">
<span id="backward-incompatible-changes-beta-release"></span><h2>Backward incompatible changes in <code class="docutils literal notranslate"><span class="pre">v1.0.0</span></code><a class="headerlink" href="#backward-incompatible-changes-in-v1-0-0" title="Permalink to this headline">¶</a></h2>
<p>The list of all backward-incompatible changes between the 0.x series and AiiDA 1.0 is
maintained <a class="reference external" href="https://github.com/aiidateam/aiida_core/wiki/Backward-incompatible-changes-in-1.0.0">here</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="troubleshooting.html" class="btn btn-neutral float-right" title="Troubleshooting" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>