

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aiida.cmdline.params.options.test_interactive &mdash; AiiDA 1.0.0b2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../../../../_static/contentui.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../install/quick_installation.html">Quick installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../install/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../install/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../install/updating_installation.html">Updating AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../install/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../get_started/index.html">First things first</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../get_started/daemon.html">Setup the daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../get_started/computers.html">Setup a computer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../get_started/codes.html">Setup a code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../get_started/plugins.html">Plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../concepts/provenance.html">Provenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../concepts/processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../concepts/calculations.html">Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../concepts/workflows.html">Workflows</a></li>
</ul>
<p class="caption"><span class="caption-text">Working with</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working/processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working/functions.html">Calculation and work functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working/calculations.html">Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working/workflows.html">Workflows</a></li>
</ul>
<p class="caption"><span class="caption-text">Working with AiiDA</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html">Command line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#scripting">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#data-types">Data types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#groups">Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#schedulers">Schedulers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#querying-data">Querying data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#caching">Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#result-manager">Result manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#backups">Backups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#rest-api">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#cookbook">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../import_export/index.html">Import and Export</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../developer_guide/index.html">AiiDA design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../developer_guide/index.html#aiida-core">AiiDA core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../developer_guide/index.html#aiida-plugins">AiiDA plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tutorial/index.html">StructureData</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tutorial/index.html#pseudopotentials">Pseudopotentials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tutorial/index.html#plugin-development">Plugin development</a></li>
</ul>
<p class="caption"><span class="caption-text">API reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="`aiida package &lt;https://aiida-core.readthedocs.io/en/latest/apidoc/aiida.html&gt;`_">`aiida package &lt;https://aiida-core.readthedocs.io/en/latest/apidoc/aiida.html&gt;`_</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../../../../aiida.html">aiida</a> &raquo;</li>
        
      <li>aiida.cmdline.params.options.test_interactive</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for aiida.cmdline.params.options.test_interactive</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1">###########################################################################</span>
<span class="c1"># Copyright (c), The AiiDA team. All rights reserved.                     #</span>
<span class="c1"># This file is part of the AiiDA code.                                    #</span>
<span class="c1">#                                                                         #</span>
<span class="c1"># The code is hosted on GitHub at https://github.com/aiidateam/aiida_core #</span>
<span class="c1"># For further information on the license, see the LICENSE.txt file        #</span>
<span class="c1"># For further information please visit http://www.aiida.net               #</span>
<span class="c1">###########################################################################</span>
<span class="sd">&quot;&quot;&quot;Unit tests for the InteractiveOption.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">division</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">print_function</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">absolute_import</span>
<span class="kn">import</span> <span class="nn">unittest</span>

<span class="kn">import</span> <span class="nn">click</span>
<span class="kn">from</span> <span class="nn">click.testing</span> <span class="k">import</span> <span class="n">CliRunner</span>
<span class="kn">from</span> <span class="nn">click.types</span> <span class="k">import</span> <span class="n">IntParamType</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">NON_INTERACTIVE</span>
<span class="kn">from</span> <span class="nn">.interactive</span> <span class="k">import</span> <span class="n">InteractiveOption</span>


<div class="viewcode-block" id="Only42IntParamType"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.Only42IntParamType">[docs]</a><span class="k">class</span> <span class="nc">Only42IntParamType</span><span class="p">(</span><span class="n">IntParamType</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Param type that only accepts 42 as valid value</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;only42int&#39;</span>

<div class="viewcode-block" id="Only42IntParamType.convert"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.Only42IntParamType.convert">[docs]</a>    <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">newval</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">Only42IntParamType</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">ctx</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">newval</span> <span class="o">!=</span> <span class="mi">42</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s2">&quot;Type validation: invalid, should be 42&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">newval</span></div>

<div class="viewcode-block" id="Only42IntParamType.__repr__"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.Only42IntParamType.__repr__">[docs]</a>    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="s1">&#39;ONLY42INT&#39;</span></div></div>


<div class="viewcode-block" id="InteractiveOptionTest"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest">[docs]</a><span class="k">class</span> <span class="nc">InteractiveOptionTest</span><span class="p">(</span><span class="n">unittest</span><span class="o">.</span><span class="n">TestCase</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Unit tests for InteractiveOption.&quot;&quot;&quot;</span>

    <span class="c1"># pylint: disable=too-many-public-methods, missing-docstring</span>

<div class="viewcode-block" id="InteractiveOptionTest.simple_command"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.simple_command">[docs]</a>    <span class="k">def</span> <span class="nf">simple_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a simple command with one InteractiveOption, kwargs get relayed to the option.&quot;&quot;&quot;</span>

        <span class="c1"># pylint: disable=no-self-use</span>

        <span class="nd">@click</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
        <span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s1">&#39;--opt&#39;</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="s1">&#39;Opt&#39;</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">InteractiveOption</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="nd">@NON_INTERACTIVE</span><span class="p">()</span>
        <span class="k">def</span> <span class="nf">cmd</span><span class="p">(</span><span class="n">opt</span><span class="p">,</span> <span class="n">non_interactive</span><span class="p">):</span>
            <span class="sd">&quot;&quot;&quot;test command for InteractiveOption&quot;&quot;&quot;</span>
            <span class="c1"># pylint: disable=unused-argument</span>

            <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">opt</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">cmd</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.setUpClass"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.setUpClass">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">setUpClass</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">runner</span> <span class="o">=</span> <span class="n">CliRunner</span><span class="p">()</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.prompt_output"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.prompt_output">[docs]</a>    <span class="k">def</span> <span class="nf">prompt_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cli_input</span><span class="p">,</span> <span class="n">converted</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return expected output of simple_command, given a commandline cli_input string.&quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=no-self-use</span>

        <span class="k">return</span> <span class="s2">&quot;Opt: </span><span class="si">{}</span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cli_input</span><span class="p">,</span> <span class="n">converted</span> <span class="ow">or</span> <span class="n">cli_input</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_prompt_str"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_prompt_str">[docs]</a>    <span class="k">def</span> <span class="nf">test_prompt_str</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        scenario: using InteractiveOption with type=str</span>
<span class="sd">        behaviour: giving no option prompts, accepts a string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">runner</span> <span class="o">=</span> <span class="n">CliRunner</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[],</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;TEST</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prompt_output</span><span class="p">(</span><span class="s1">&#39;TEST&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_prompt_empty_input"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_prompt_empty_input">[docs]</a>    <span class="k">def</span> <span class="nf">test_prompt_empty_input</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        scenario: using InteractiveOption with type=str and invoking without options</span>
<span class="sd">        behaviour: pressing enter on empty line at prompt repeats the prompt without a message</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">runner</span> <span class="o">=</span> <span class="n">CliRunner</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[],</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">TEST</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="s2">&quot;Opt: </span><span class="se">\n</span><span class="s2">Opt: TEST</span><span class="se">\n</span><span class="s2">TEST</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_prompt_help_default"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_prompt_help_default">[docs]</a>    <span class="k">def</span> <span class="nf">test_prompt_help_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        scenario: using InteractiveOption with type=str and no help parameter and invoking without options</span>
<span class="sd">        behaviour: entering &#39;?&#39; leads to a default help message being printed and prompt repeated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">runner</span> <span class="o">=</span> <span class="n">CliRunner</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[],</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;?</span><span class="se">\n</span><span class="s1">TEST</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">expected_1</span> <span class="o">=</span> <span class="s1">&#39;Opt: ?</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">expected_2</span> <span class="o">=</span> <span class="s1">&#39;Expecting text</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">expected_3</span> <span class="o">=</span> <span class="s1">&#39;Opt: TEST</span><span class="se">\n</span><span class="s1">TEST</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">expected_1</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">expected_2</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">expected_3</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_prompt_help_custom"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_prompt_help_custom">[docs]</a>    <span class="k">def</span> <span class="nf">test_prompt_help_custom</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        scenario: using InteractiveOption with type=str and help message and invoking without options</span>
<span class="sd">        behaviour: entering &#39;?&#39; leads to the given help message being printed and the prompt repeated</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Please enter some text&#39;</span><span class="p">)</span>
        <span class="n">runner</span> <span class="o">=</span> <span class="n">CliRunner</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[],</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;?</span><span class="se">\n</span><span class="s1">TEST</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">expected_1</span> <span class="o">=</span> <span class="s1">&#39;Opt: ?</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">expected_2</span> <span class="o">=</span> <span class="s1">&#39;Please enter some text</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="n">expected_3</span> <span class="o">=</span> <span class="s1">&#39;Opt: TEST</span><span class="se">\n</span><span class="s1">TEST</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">expected_1</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">expected_2</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">expected_3</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_prompt_simple"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_prompt_simple">[docs]</a>    <span class="k">def</span> <span class="nf">test_prompt_simple</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        scenario: using InteractiveOption with type=bool</span>
<span class="sd">        behaviour: giving no option prompts, accepts &#39;true&#39;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">[(</span><span class="nb">bool</span><span class="p">,</span> <span class="s1">&#39;true&#39;</span><span class="p">,</span> <span class="s1">&#39;True&#39;</span><span class="p">),</span> <span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="s1">&#39;98&#39;</span><span class="p">,</span> <span class="s1">&#39;98&#39;</span><span class="p">),</span> <span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="s1">&#39;3.14e-7&#39;</span><span class="p">,</span> <span class="s1">&#39;3.14e-07&#39;</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">ptype</span><span class="p">,</span> <span class="n">cli_input</span><span class="p">,</span> <span class="n">output</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">ptype</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;help msg&#39;</span><span class="p">)</span>
            <span class="n">runner</span> <span class="o">=</span> <span class="n">CliRunner</span><span class="p">()</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[],</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">?</span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cli_input</span><span class="p">))</span>
            <span class="n">expected_1</span> <span class="o">=</span> <span class="s1">&#39;Opt: </span><span class="se">\n</span><span class="s1">Opt: ?</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">expected_2</span> <span class="o">=</span> <span class="s1">&#39;help msg</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">expected_2</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">prompt_output</span><span class="p">(</span><span class="n">cli_input</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">expected_1</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">expected_2</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.strip_line"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.strip_line">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">strip_line</span><span class="p">(</span><span class="n">text</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;returns text without the last line&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">text</span><span class="o">.</span><span class="n">rsplit</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_prompt_complex"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_prompt_complex">[docs]</a>    <span class="k">def</span> <span class="nf">test_prompt_complex</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        scenario: using InteractiveOption with type=float</span>
<span class="sd">        behaviour: giving no option prompts, accepts 3.14e-7</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">[(</span><span class="n">click</span><span class="o">.</span><span class="n">File</span><span class="p">(),</span> <span class="vm">__file__</span><span class="p">),</span> <span class="p">(</span><span class="n">click</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">exists</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="vm">__file__</span><span class="p">)]</span>
        <span class="k">for</span> <span class="n">ptype</span><span class="p">,</span> <span class="n">cli_input</span> <span class="ow">in</span> <span class="n">params</span><span class="p">:</span>
            <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="n">ptype</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;help msg&#39;</span><span class="p">)</span>
            <span class="n">runner</span> <span class="o">=</span> <span class="n">CliRunner</span><span class="p">()</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[],</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">?</span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cli_input</span><span class="p">))</span>
            <span class="n">expected_1</span> <span class="o">=</span> <span class="s1">&#39;Opt: </span><span class="se">\n</span><span class="s1">Opt: ?</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">expected_2</span> <span class="o">=</span> <span class="s1">&#39;help msg</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="n">expected_2</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">strip_line</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prompt_output</span><span class="p">(</span><span class="n">cli_input</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">expected_1</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">expected_2</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_default_value_prompt"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_default_value_prompt">[docs]</a>    <span class="k">def</span> <span class="nf">test_default_value_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        scenario: using InteractiveOption with a default value, invoke without options</span>
<span class="sd">        behaviour: prompt, showing the default value, take default on empty cli_input.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">returns</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[],</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">returns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="s1">&#39;Opt [default]: </span><span class="se">\n</span><span class="s1">default</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[],</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;TEST</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">returns</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="s1">&#39;Opt [default]: TEST</span><span class="se">\n</span><span class="s1">TEST</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">returns</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_default_value_empty_opt"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_default_value_empty_opt">[docs]</a>    <span class="k">def</span> <span class="nf">test_default_value_empty_opt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        scenario: InteractiveOption with default value, invoke with empty option (--opt=)</span>
<span class="sd">        behaviour: accept empty string as input</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
        <span class="n">runner</span> <span class="o">=</span> <span class="n">CliRunner</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;--opt=&#39;</span><span class="p">])</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_opt_given_valid"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_opt_given_valid">[docs]</a>    <span class="k">def</span> <span class="nf">test_opt_given_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        scenario: InteractiveOption, invoked with a valid value on the cmdline</span>
<span class="sd">        behaviour: accept valid value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
        <span class="n">runner</span> <span class="o">=</span> <span class="n">CliRunner</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;--opt=4&#39;</span><span class="p">])</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="s1">&#39;4</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="n">expected</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_opt_given_invalid"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_opt_given_invalid">[docs]</a>    <span class="k">def</span> <span class="nf">test_opt_given_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        scenario: InteractiveOption, invoked with a valid value on the cmdline</span>
<span class="sd">        behaviour: accept valid value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
        <span class="n">runner</span> <span class="o">=</span> <span class="n">CliRunner</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;--opt=foo&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;Invalid value&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_non_interactive"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_non_interactive">[docs]</a>    <span class="k">def</span> <span class="nf">test_non_interactive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        scenario: InteractiveOption, invoked with only --non-interactive (and the option is required)</span>
<span class="sd">        behaviout: fail</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">runner</span> <span class="o">=</span> <span class="n">CliRunner</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;--non-interactive&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;Usage: &#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;Missing option&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_non_interactive_default"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_non_interactive_default">[docs]</a>    <span class="k">def</span> <span class="nf">test_non_interactive_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        scenario: InteractiveOption, invoked with only --non-interactive</span>
<span class="sd">        behaviour: fail</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">)</span>
        <span class="n">runner</span> <span class="o">=</span> <span class="n">CliRunner</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;--non-interactive&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="s1">&#39;default</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.user_callback"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.user_callback">[docs]</a>    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">user_callback</span><span class="p">(</span><span class="n">_ctx</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        A fake user callback ued for testing.</span>

<span class="sd">        :param _ctx: The click context</span>
<span class="sd">        :param param: The parameter name</span>
<span class="sd">        :param value: The parameter value</span>
<span class="sd">        :return: The validated parameter</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
            <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

        <span class="k">if</span> <span class="n">value</span> <span class="o">!=</span> <span class="mi">42</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">click</span><span class="o">.</span><span class="n">BadParameter</span><span class="p">(</span><span class="s1">&#39;invalid&#39;</span><span class="p">,</span> <span class="n">param</span><span class="o">=</span><span class="n">param</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">value</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_after_callback_valid"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_after_callback_valid">[docs]</a>    <span class="k">def</span> <span class="nf">test_after_callback_valid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        scenario: InteractiveOption with a user callback</span>
<span class="sd">        action: invoke with valid value</span>
<span class="sd">        behaviour: user callback runs &amp; succeeds</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user_callback</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;--opt=42&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="s1">&#39;42</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_after_callback_invalid"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_after_callback_invalid">[docs]</a>    <span class="k">def</span> <span class="nf">test_after_callback_invalid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        scenario: InteractiveOption with a user callback</span>
<span class="sd">        action: invoke with invalid value of right type</span>
<span class="sd">        behaviour: user callback runs &amp; succeeds</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user_callback</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;--opt=234234&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;Invalid value&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;invalid&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_after_callback_wrong_typ"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_after_callback_wrong_typ">[docs]</a>    <span class="k">def</span> <span class="nf">test_after_callback_wrong_typ</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        scenario: InteractiveOption with a user callback</span>
<span class="sd">        action: invoke with invalid value of wrong type</span>
<span class="sd">        behaviour: user callback does not run</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user_callback</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;--opt=bla&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;Invalid value&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;bla&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_after_callback_empty"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_after_callback_empty">[docs]</a>    <span class="k">def</span> <span class="nf">test_after_callback_empty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        scenario: InteractiveOption with a user callback</span>
<span class="sd">        action: invoke with invalid value of wrong type</span>
<span class="sd">        behaviour: user callback does not run</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user_callback</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;--opt=&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;Invalid value&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertNotIn</span><span class="p">(</span><span class="s1">&#39;empty&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_after_validation_interactive"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_after_validation_interactive">[docs]</a>    <span class="k">def</span> <span class="nf">test_after_validation_interactive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that the type validation gets called on values entered at a prompt.</span>

<span class="sd">        Scenario:</span>
<span class="sd">            * InteractiveOption with custom type and prompt set</span>
<span class="sd">            * invoked without passing the options</span>
<span class="sd">            * on prompt: first enter an invalid value, then a valid one</span>

<span class="sd">        Behaviour:</span>
<span class="sd">            * Prompt for the value</span>
<span class="sd">            * reject invalid value, prompt again</span>
<span class="sd">            * accept valid value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user_callback</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">Only42IntParamType</span><span class="p">())</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[],</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;23</span><span class="se">\n</span><span class="s1">42</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;Opt: 23</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;Type validation: invalid&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;Opt: 42</span><span class="se">\n</span><span class="s1">42</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_after_callback_default_noninteractive"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_after_callback_default_noninteractive">[docs]</a>    <span class="k">def</span> <span class="nf">test_after_callback_default_noninteractive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Test that the callback gets called on the default, in line with click 6 behaviour.</span>

<span class="sd">        Scenario:</span>
<span class="sd">            * InteractiveOption with user callback and invalid default</span>
<span class="sd">            * invoke with no options and --non-interactive</span>

<span class="sd">        Behaviour:</span>
<span class="sd">            * the default value gets passed through the callback and rejected</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># pylint: disable=invalid-name</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">user_callback</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">23</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;--non-interactive&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNotNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="s1">&#39;Invalid value&#39;</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_default_empty_empty_cli"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_default_empty_empty_cli">[docs]</a>    <span class="k">def</span> <span class="nf">test_default_empty_empty_cli</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Test that default=&quot;&quot; allows to pass an empty cli option.&quot;&quot;&quot;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;--opt=&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_default_empty_prompt"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_default_empty_prompt">[docs]</a>    <span class="k">def</span> <span class="nf">test_default_empty_prompt</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Test that default=&quot;&quot; allows to pass an empty cli option.&quot;&quot;&quot;</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">str</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="s1">&#39;Opt []: </span><span class="se">\n\n</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_prompt_dynamic_default"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_prompt_dynamic_default">[docs]</a>    <span class="k">def</span> <span class="nf">test_prompt_dynamic_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Test that dynamic defaults for prompting still work.&quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_not_required_noninteractive"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_not_required_noninteractive">[docs]</a>    <span class="k">def</span> <span class="nf">test_not_required_noninteractive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;--non-interactive&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="c1"># I strip, there is typically a \n at the end</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="s1">&#39;None</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_not_required_interactive"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_not_required_interactive">[docs]</a>    <span class="k">def</span> <span class="nf">test_not_required_interactive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;value</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="s1">&#39;Opt: value</span><span class="se">\n</span><span class="s1">value</span><span class="se">\n</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_not_required_noninteractive_default"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_not_required_noninteractive_default">[docs]</a>    <span class="k">def</span> <span class="nf">test_not_required_noninteractive_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;--non-interactive&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertEqual</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="InteractiveOptionTest.test_not_required_interactive_default"><a class="viewcode-back" href="../../../../../apidoc/aiida.cmdline.params.options.html#aiida.cmdline.params.options.test_interactive.InteractiveOptionTest.test_not_required_interactive_default">[docs]</a>    <span class="k">def</span> <span class="nf">test_not_required_interactive_default</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">cmd</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">simple_command</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cmd</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">not needed</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="n">expected</span> <span class="o">=</span> <span class="s1">&#39;Opt []: </span><span class="se">\n\n</span><span class="s1">&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIsNone</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">exception</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assertIn</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span><span class="p">)</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>