

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aiida.restapi.api &mdash; AiiDA 1.0.0b2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../../_static/contentui.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../install/quick_installation.html">Quick installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/updating_installation.html">Updating AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../install/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../get_started/index.html">First things first</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../get_started/daemon.html">Setup the daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../get_started/computers.html">Setup a computer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../get_started/codes.html">Setup a code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../get_started/plugins.html">Plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../concepts/provenance.html">Provenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../concepts/processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../concepts/calculations.html">Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../concepts/workflows.html">Workflows</a></li>
</ul>
<p class="caption"><span class="caption-text">Working with</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../working/processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../working/functions.html">Calculation and work functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../working/calculations.html">Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../working/workflows.html">Workflows</a></li>
</ul>
<p class="caption"><span class="caption-text">Working with AiiDA</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../working_with_aiida/index.html">Command line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../working_with_aiida/index.html#scripting">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../working_with_aiida/index.html#data-types">Data types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../working_with_aiida/index.html#groups">Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../working_with_aiida/index.html#schedulers">Schedulers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../working_with_aiida/index.html#querying-data">Querying data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../working_with_aiida/index.html#caching">Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../working_with_aiida/index.html#result-manager">Result manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../working_with_aiida/index.html#backups">Backups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../working_with_aiida/index.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../working_with_aiida/index.html#rest-api">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../working_with_aiida/index.html#cookbook">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../import_export/index.html">Import and Export</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../developer_guide/index.html">AiiDA design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer_guide/index.html#aiida-core">AiiDA core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../developer_guide/index.html#aiida-plugins">AiiDA plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/index.html">StructureData</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/index.html#pseudopotentials">Pseudopotentials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorial/index.html#plugin-development">Plugin development</a></li>
</ul>
<p class="caption"><span class="caption-text">API reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="`aiida package &lt;https://aiida-core.readthedocs.io/en/latest/apidoc/aiida.html&gt;`_">`aiida package &lt;https://aiida-core.readthedocs.io/en/latest/apidoc/aiida.html&gt;`_</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../../aiida.html">aiida</a> &raquo;</li>
        
      <li>aiida.restapi.api</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for aiida.restapi.api</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1">###########################################################################</span>
<span class="c1"># Copyright (c), The AiiDA team. All rights reserved.                     #</span>
<span class="c1"># This file is part of the AiiDA code.                                    #</span>
<span class="c1">#                                                                         #</span>
<span class="c1"># The code is hosted on GitHub at https://github.com/aiidateam/aiida_core #</span>
<span class="c1"># For further information on the license, see the LICENSE.txt file        #</span>
<span class="c1"># For further information please visit http://www.aiida.net               #</span>
<span class="c1">###########################################################################</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Implementation of RESTful API for materialscloud.org based on flask +</span>
<span class="sd">flask_restful module</span>
<span class="sd">For the time being the API returns the parsed valid endpoints upon GET request</span>
<span class="sd">Author: Snehal P. Waychal and Fernando Gargiulo @ Theos, EPFL</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">division</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">print_function</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">absolute_import</span>
<span class="kn">from</span> <span class="nn">flask</span> <span class="k">import</span> <span class="n">Flask</span><span class="p">,</span> <span class="n">jsonify</span>
<span class="kn">from</span> <span class="nn">flask_restful</span> <span class="k">import</span> <span class="n">Api</span>
<span class="kn">from</span> <span class="nn">werkzeug.exceptions</span> <span class="k">import</span> <span class="n">HTTPException</span>


<div class="viewcode-block" id="App"><a class="viewcode-back" href="../../../apidoc/aiida.restapi.html#aiida.restapi.api.App">[docs]</a><span class="k">class</span> <span class="nc">App</span><span class="p">(</span><span class="n">Flask</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Basic Flask App customized for this REST Api purposes</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="App.__init__"><a class="viewcode-back" href="../../../apidoc/aiida.restapi.html#aiida.restapi.api.App.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="c1"># Decide whether or not to catch the internal server exceptions (</span>
        <span class="c1"># default is True)</span>
        <span class="n">catch_internal_server</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">catch_internal_server</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;catch_internal_server&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>

        <span class="c1"># Basic initialization</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">App</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1"># Error handler</span>
        <span class="kn">from</span> <span class="nn">aiida.restapi.common.exceptions</span> <span class="k">import</span> <span class="n">RestInputValidationError</span><span class="p">,</span> \
            <span class="n">RestValidationError</span><span class="p">,</span> <span class="n">RestFeatureNotAvailable</span>

        <span class="k">if</span> <span class="n">catch_internal_server</span><span class="p">:</span>

            <span class="nd">@self</span><span class="o">.</span><span class="n">errorhandler</span><span class="p">(</span><span class="ne">Exception</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">error_handler</span><span class="p">(</span><span class="n">error</span><span class="p">):</span>
                <span class="c1"># pylint: disable=unused-variable</span>
                <span class="sd">&quot;&quot;&quot;Error handler to return customized error messages from rest api&quot;&quot;&quot;</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">RestValidationError</span><span class="p">):</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">error</span><span class="p">)})</span>
                    <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">=</span> <span class="mi">400</span>

                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">RestInputValidationError</span><span class="p">):</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">error</span><span class="p">)})</span>
                    <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">=</span> <span class="mi">400</span>

                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">RestFeatureNotAvailable</span><span class="p">):</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="n">jsonify</span><span class="p">({</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">error</span><span class="p">)})</span>
                    <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">=</span> <span class="mi">501</span>

                <span class="c1"># Generic server-side error (not to make the api crash if an</span>
                <span class="c1"># unhandled exception is raised. Caution is never enough!!)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">response</span> <span class="o">=</span> <span class="n">jsonify</span><span class="p">(</span>
                        <span class="p">{</span><span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;Internal server error. The original &#39;</span>
                         <span class="s1">&#39;message was: </span><span class="se">\&quot;</span><span class="si">{}</span><span class="se">\&quot;</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">error</span><span class="p">)})</span>
                    <span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">=</span> <span class="mi">500</span>

                <span class="k">return</span> <span class="n">response</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">pass</span></div></div>


<div class="viewcode-block" id="AiidaApi"><a class="viewcode-back" href="../../../apidoc/aiida.restapi.html#aiida.restapi.api.AiidaApi">[docs]</a><span class="k">class</span> <span class="nc">AiidaApi</span><span class="p">(</span><span class="n">Api</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    AiiDA customized version of the flask_restful Api class</span>
<span class="sd">    &quot;&quot;&quot;</span>

<div class="viewcode-block" id="AiidaApi.__init__"><a class="viewcode-back" href="../../../apidoc/aiida.restapi.html#aiida.restapi.api.AiidaApi.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">app</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The need to have a special constructor is to include directly the</span>
<span class="sd">        addition of resources with the parameters required to initialize the</span>
<span class="sd">        resource classes.</span>

<span class="sd">        :param kwargs: parameters to be passed to the resources for</span>
<span class="sd">          configuration and PREFIX</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">from</span> <span class="nn">aiida.restapi.resources</span> <span class="k">import</span> <span class="n">Calculation</span><span class="p">,</span> <span class="n">Computer</span><span class="p">,</span> <span class="n">User</span><span class="p">,</span> <span class="n">Code</span><span class="p">,</span> <span class="n">Data</span><span class="p">,</span> \
            <span class="n">Group</span><span class="p">,</span> <span class="n">Node</span><span class="p">,</span> <span class="n">StructureData</span><span class="p">,</span> <span class="n">KpointsData</span><span class="p">,</span> <span class="n">BandsData</span><span class="p">,</span> <span class="n">UpfData</span><span class="p">,</span> <span class="n">CifData</span><span class="p">,</span> <span class="n">ServerInfo</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">app</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">AiidaApi</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">app</span><span class="o">=</span><span class="n">app</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;PREFIX&#39;</span><span class="p">],</span> <span class="n">catch_all_404s</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span>
            <span class="n">ServerInfo</span><span class="p">,</span>
            <span class="s2">&quot;/server/&quot;</span><span class="p">,</span>
            <span class="s2">&quot;/server/endpoints/&quot;</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;server&#39;</span><span class="p">,</span>
            <span class="n">strict_slashes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">resource_class_kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c1">## Add resources and endpoints to the api</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span>
            <span class="n">Computer</span><span class="p">,</span>
            <span class="c1"># supported urls</span>
            <span class="s1">&#39;/computers/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/computers/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/computers/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/computers/&lt;id&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/computers/schema/&#39;</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;computers&#39;</span><span class="p">,</span>
            <span class="n">strict_slashes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">resource_class_kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span>
            <span class="n">Node</span><span class="p">,</span>
            <span class="s1">&#39;/nodes/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/nodes/schema/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/nodes/statistics/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/nodes/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/nodes/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/nodes/&lt;id&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/nodes/&lt;id&gt;/io/inputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/nodes/&lt;id&gt;/io/inputs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/nodes/&lt;id&gt;/io/inputs/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/nodes/&lt;id&gt;/io/outputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/nodes/&lt;id&gt;/io/outputs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/nodes/&lt;id&gt;/io/outputs/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/nodes/&lt;id&gt;/io/tree/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/nodes/&lt;id&gt;/content/attributes/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/nodes/&lt;id&gt;/content/extras/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/nodes/&lt;id&gt;/content/visualization/&#39;</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;nodes&#39;</span><span class="p">,</span>
            <span class="n">strict_slashes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">resource_class_kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span>
            <span class="n">Calculation</span><span class="p">,</span>
            <span class="s1">&#39;/calculations/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/calculations/schema/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/calculations/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/calculations/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/calculations/&lt;id&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/calculations/&lt;id&gt;/io/retrieved_inputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/calculations/&lt;id&gt;/io/retrieved_outputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/calculations/&lt;id&gt;/io/inputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/calculations/&lt;id&gt;/io/inputs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/calculations/&lt;id&gt;/io/inputs/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/calculations/&lt;id&gt;/io/outputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/calculations/&lt;id&gt;/io/outputs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/calculations/&lt;id&gt;/io/outputs/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/calculations/&lt;id&gt;/io/tree/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/calculations/&lt;id&gt;/content/attributes/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/calculations/&lt;id&gt;/content/extras/&#39;</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;calculations&#39;</span><span class="p">,</span>
            <span class="n">strict_slashes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">resource_class_kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span>
            <span class="n">Data</span><span class="p">,</span>
            <span class="s1">&#39;/data/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/data/schema/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/data/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/data/page/&lt;int:page&gt;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/data/&lt;id&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/data/&lt;id&gt;/io/inputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/data/&lt;id&gt;/io/inputs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/data/&lt;id&gt;/io/inputs/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/data/&lt;id&gt;/io/outputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/data/&lt;id&gt;/io/outputs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/data/&lt;id&gt;/io/outputs/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/data/&lt;id&gt;/io/tree/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/data/&lt;id&gt;/content/attributes/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/data/&lt;id&gt;/content/extras/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/data/&lt;id&gt;/content/visualization/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/data/&lt;id&gt;/content/download/&#39;</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;data&#39;</span><span class="p">,</span>
            <span class="n">strict_slashes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">resource_class_kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span>
            <span class="n">Code</span><span class="p">,</span>
            <span class="s1">&#39;/codes/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/codes/schema/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/codes/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/codes/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/codes/&lt;id&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/codes/&lt;id&gt;/io/inputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/codes/&lt;id&gt;/io/inputs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/codes/&lt;id&gt;/io/inputs/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/codes/&lt;id&gt;/io/outputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/codes/&lt;id&gt;/io/outputs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/codes/&lt;id&gt;/io/outputs/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/codes/&lt;id&gt;/io/tree/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/codes/&lt;id&gt;/content/attributes/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/codes/&lt;id&gt;/content/extras/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/codes/&lt;id&gt;/content/visualization/&#39;</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;codes&#39;</span><span class="p">,</span>
            <span class="n">strict_slashes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">resource_class_kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span>
            <span class="n">StructureData</span><span class="p">,</span>
            <span class="s1">&#39;/structures/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/structures/schema/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/structures/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/structures/page/&lt;int:page&gt;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/structures/&lt;id&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/structures/&lt;id&gt;/io/inputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/structures/&lt;id&gt;/io/inputs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/structures/&lt;id&gt;/io/inputs/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/structures/&lt;id&gt;/io/outputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/structures/&lt;id&gt;/io/outputs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/structures/&lt;id&gt;/io/outputs/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/structures/&lt;id&gt;/io/tree/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/structures/&lt;id&gt;/content/attributes/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/structures/&lt;id&gt;/content/extras/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/structures/&lt;id&gt;/content/visualization/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/structures/&lt;id&gt;/content/download/&#39;</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;structures&#39;</span><span class="p">,</span>
            <span class="n">strict_slashes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">resource_class_kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span>
            <span class="n">KpointsData</span><span class="p">,</span>
            <span class="s1">&#39;/kpoints/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/kpoints/schema/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/kpoints/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/kpoints/page/&lt;int:page&gt;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/kpoints/&lt;id&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/kpoints/&lt;id&gt;/io/inputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/kpoints/&lt;id&gt;/io/inputs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/kpoints/&lt;id&gt;/io/inputs/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/kpoints/&lt;id&gt;/io/outputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/kpoints/&lt;id&gt;/io/outputs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/kpoints/&lt;id&gt;/io/outputs/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/kpoints/&lt;id&gt;/io/tree/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/kpoints/&lt;id&gt;/content/attributes/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/kpoints/&lt;id&gt;/content/extras/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/kpoints/&lt;id&gt;/content/visualization/&#39;</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;kpoints&#39;</span><span class="p">,</span>
            <span class="n">strict_slashes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">resource_class_kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span>
            <span class="n">BandsData</span><span class="p">,</span>
            <span class="s1">&#39;/bands/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/bands/schema/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/bands/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/bands/page/&lt;int:page&gt;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/bands/&lt;id&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/bands/&lt;id&gt;/io/inputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/bands/&lt;id&gt;/io/inputs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/bands/&lt;id&gt;/io/inputs/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/bands/&lt;id&gt;/io/outputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/bands/&lt;id&gt;/io/outputs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/bands/&lt;id&gt;/io/outputs/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/bands/&lt;id&gt;/io/tree/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/bands/&lt;id&gt;/content/attributes/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/bands/&lt;id&gt;/content/extras/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/bands/&lt;id&gt;/content/visualization/&#39;</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;bands&#39;</span><span class="p">,</span>
            <span class="n">strict_slashes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">resource_class_kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span>
            <span class="n">UpfData</span><span class="p">,</span>
            <span class="s1">&#39;/upfs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/upfs/schema/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/upfs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/upfs/page/&lt;int:page&gt;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/upfs/&lt;id&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/upfs/&lt;id&gt;/io/inputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/upfs/&lt;id&gt;/io/inputs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/upfs/&lt;id&gt;/io/inputs/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/upfs/&lt;id&gt;/io/outputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/upfs/&lt;id&gt;/io/outputs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/upfs/&lt;id&gt;/io/outputs/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/upfs/&lt;id&gt;/io/tree/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/upfs/&lt;id&gt;/content/attributes/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/upfs/&lt;id&gt;/content/extras/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/upfs/&lt;id&gt;/content/visualization/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/upfs/&lt;id&gt;/content/download/&#39;</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;upfs&#39;</span><span class="p">,</span>
            <span class="n">strict_slashes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">resource_class_kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span>
            <span class="n">CifData</span><span class="p">,</span>
            <span class="s1">&#39;/cifs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/cifs/schema/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/cifs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/cifs/page/&lt;int:page&gt;&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/cifs/&lt;id&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/cifs/&lt;id&gt;/io/inputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/cifs/&lt;id&gt;/io/inputs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/cifs/&lt;id&gt;/io/inputs/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/cifs/&lt;id&gt;/io/outputs/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/cifs/&lt;id&gt;/io/outputs/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/cifs/&lt;id&gt;/io/outputs/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/cifs/&lt;id&gt;/io/tree/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/cifs/&lt;id&gt;/content/attributes/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/cifs/&lt;id&gt;/content/extras/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/cifs/&lt;id&gt;/content/visualization/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/cifs/&lt;id&gt;/content/download/&#39;</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;cifs&#39;</span><span class="p">,</span>
            <span class="n">strict_slashes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">resource_class_kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span>
            <span class="n">User</span><span class="p">,</span>
            <span class="s1">&#39;/users/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/users/schema/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/users/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/users/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/users/&lt;id&gt;/&#39;</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;users&#39;</span><span class="p">,</span>
            <span class="n">strict_slashes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">resource_class_kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span>
            <span class="n">Group</span><span class="p">,</span>
            <span class="s1">&#39;/groups/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/groups/schema/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/groups/page/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/groups/page/&lt;int:page&gt;/&#39;</span><span class="p">,</span>
            <span class="s1">&#39;/groups/&lt;id&gt;/&#39;</span><span class="p">,</span>
            <span class="n">endpoint</span><span class="o">=</span><span class="s1">&#39;groups&#39;</span><span class="p">,</span>
            <span class="n">strict_slashes</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">resource_class_kwargs</span><span class="o">=</span><span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="AiidaApi.handle_error"><a class="viewcode-back" href="../../../apidoc/aiida.restapi.html#aiida.restapi.api.AiidaApi.handle_error">[docs]</a>    <span class="k">def</span> <span class="nf">handle_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        this method handles the 404 &quot;URL not found&quot; exception and return custom message</span>
<span class="sd">        :param e: raised exception</span>
<span class="sd">        :return: list of available endpoints</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">HTTPException</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">e</span><span class="o">.</span><span class="n">code</span> <span class="o">==</span> <span class="mi">404</span><span class="p">:</span>

                <span class="kn">from</span> <span class="nn">aiida.restapi.common.utils</span> <span class="k">import</span> <span class="n">list_routes</span>

                <span class="n">response</span> <span class="o">=</span> <span class="p">{}</span>

                <span class="n">response</span><span class="p">[</span><span class="s2">&quot;status&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;404 Not Found&quot;</span>
                <span class="n">response</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;The requested URL is not found on the server.&quot;</span>

                <span class="n">response</span><span class="p">[</span><span class="s2">&quot;available_endpoints&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">list_routes</span><span class="p">()</span>

                <span class="k">return</span> <span class="n">jsonify</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>

        <span class="k">raise</span> <span class="n">e</span></div></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>