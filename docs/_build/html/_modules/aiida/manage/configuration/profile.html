

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aiida.manage.configuration.profile &mdash; AiiDA 1.0.0b2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../../../_static/contentui.js"></script>
    
    <script type="text/javascript" src="../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../install/quick_installation.html">Quick installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../install/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../install/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../install/updating_installation.html">Updating AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../install/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../get_started/index.html">First things first</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../get_started/daemon.html">Setup the daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../get_started/computers.html">Setup a computer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../get_started/codes.html">Setup a code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../get_started/plugins.html">Plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../concepts/provenance.html">Provenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../concepts/processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../concepts/calculations.html">Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../concepts/workflows.html">Workflows</a></li>
</ul>
<p class="caption"><span class="caption-text">Working with</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../working/processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../working/functions.html">Calculation and work functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../working/calculations.html">Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../working/workflows.html">Workflows</a></li>
</ul>
<p class="caption"><span class="caption-text">Working with AiiDA</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../working_with_aiida/index.html">Command line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../working_with_aiida/index.html#scripting">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../working_with_aiida/index.html#data-types">Data types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../working_with_aiida/index.html#groups">Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../working_with_aiida/index.html#schedulers">Schedulers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../working_with_aiida/index.html#querying-data">Querying data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../working_with_aiida/index.html#caching">Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../working_with_aiida/index.html#result-manager">Result manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../working_with_aiida/index.html#backups">Backups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../working_with_aiida/index.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../working_with_aiida/index.html#rest-api">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../working_with_aiida/index.html#cookbook">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../import_export/index.html">Import and Export</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_guide/index.html">AiiDA design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_guide/index.html#aiida-core">AiiDA core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../developer_guide/index.html#aiida-plugins">AiiDA plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorial/index.html">StructureData</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorial/index.html#pseudopotentials">Pseudopotentials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tutorial/index.html#plugin-development">Plugin development</a></li>
</ul>
<p class="caption"><span class="caption-text">API reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="`aiida package &lt;https://aiida-core.readthedocs.io/en/latest/apidoc/aiida.html&gt;`_">`aiida package &lt;https://aiida-core.readthedocs.io/en/latest/apidoc/aiida.html&gt;`_</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../../../aiida.html">aiida</a> &raquo;</li>
        
          <li><a href="../configuration.html">aiida.manage.configuration</a> &raquo;</li>
        
      <li>aiida.manage.configuration.profile</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for aiida.manage.configuration.profile</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1">###########################################################################</span>
<span class="c1"># Copyright (c), The AiiDA team. All rights reserved.                     #</span>
<span class="c1"># This file is part of the AiiDA code.                                    #</span>
<span class="c1">#                                                                         #</span>
<span class="c1"># The code is hosted on GitHub at https://github.com/aiidateam/aiida_core #</span>
<span class="c1"># For further information on the license, see the LICENSE.txt file        #</span>
<span class="c1"># For further information please visit http://www.aiida.net               #</span>
<span class="c1">###########################################################################</span>
<span class="sd">&quot;&quot;&quot;AiiDA profile related code&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">division</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">print_function</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">absolute_import</span>

<span class="kn">import</span> <span class="nn">collections</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">from</span> <span class="nn">aiida.common</span> <span class="k">import</span> <span class="n">exceptions</span>
<span class="kn">from</span> <span class="nn">.settings</span> <span class="k">import</span> <span class="n">DAEMON_DIR</span><span class="p">,</span> <span class="n">DAEMON_LOG_DIR</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Profile&#39;</span><span class="p">,)</span>

<span class="n">CIRCUS_PID_FILE_TEMPLATE</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DAEMON_DIR</span><span class="p">,</span> <span class="s1">&#39;circus-</span><span class="si">{}</span><span class="s1">.pid&#39;</span><span class="p">)</span>
<span class="n">DAEMON_PID_FILE_TEMPLATE</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DAEMON_DIR</span><span class="p">,</span> <span class="s1">&#39;aiida-</span><span class="si">{}</span><span class="s1">.pid&#39;</span><span class="p">)</span>
<span class="n">CIRCUS_LOG_FILE_TEMPLATE</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DAEMON_LOG_DIR</span><span class="p">,</span> <span class="s1">&#39;circus-</span><span class="si">{}</span><span class="s1">.log&#39;</span><span class="p">)</span>
<span class="n">DAEMON_LOG_FILE_TEMPLATE</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DAEMON_LOG_DIR</span><span class="p">,</span> <span class="s1">&#39;aiida-</span><span class="si">{}</span><span class="s1">.log&#39;</span><span class="p">)</span>
<span class="n">CIRCUS_PORT_FILE_TEMPLATE</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DAEMON_DIR</span><span class="p">,</span> <span class="s1">&#39;circus-</span><span class="si">{}</span><span class="s1">.port&#39;</span><span class="p">)</span>
<span class="n">CIRCUS_SOCKET_FILE_TEMPATE</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">DAEMON_DIR</span><span class="p">,</span> <span class="s1">&#39;circus-</span><span class="si">{}</span><span class="s1">.sockets&#39;</span><span class="p">)</span>
<span class="n">CIRCUS_CONTROLLER_SOCKET_TEMPLATE</span> <span class="o">=</span> <span class="s1">&#39;circus.c.sock&#39;</span>
<span class="n">CIRCUS_PUBSUB_SOCKET_TEMPLATE</span> <span class="o">=</span> <span class="s1">&#39;circus.p.sock&#39;</span>
<span class="n">CIRCUS_STATS_SOCKET_TEMPLATE</span> <span class="o">=</span> <span class="s1">&#39;circus.s.sock&#39;</span>


<div class="viewcode-block" id="Profile"><a class="viewcode-back" href="../../../../apidoc/aiida.manage.configuration.html#aiida.manage.configuration.Profile">[docs]</a><span class="k">class</span> <span class="nc">Profile</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>  <span class="c1"># pylint: disable=useless-object-inheritance,too-many-public-methods</span>
    <span class="sd">&quot;&quot;&quot;Class that models a profile as it is stored in the configuration file of an AiiDA instance.&quot;&quot;&quot;</span>

    <span class="n">RMQ_PREFIX</span> <span class="o">=</span> <span class="s1">&#39;aiida-</span><span class="si">{uuid}</span><span class="s1">&#39;</span>
    <span class="n">KEY_OPTIONS</span> <span class="o">=</span> <span class="s1">&#39;options&#39;</span>
    <span class="n">KEY_UUID</span> <span class="o">=</span> <span class="s1">&#39;PROFILE_UUID&#39;</span>
    <span class="n">KEY_DEFAULT_USER</span> <span class="o">=</span> <span class="s1">&#39;default_user_email&#39;</span>
    <span class="n">KEY_DATABASE_ENGINE</span> <span class="o">=</span> <span class="s1">&#39;AIIDADB_ENGINE&#39;</span>
    <span class="n">KEY_DATABASE_BACKEND</span> <span class="o">=</span> <span class="s1">&#39;AIIDADB_BACKEND&#39;</span>
    <span class="n">KEY_DATABASE_NAME</span> <span class="o">=</span> <span class="s1">&#39;AIIDADB_NAME&#39;</span>
    <span class="n">KEY_DATABASE_PORT</span> <span class="o">=</span> <span class="s1">&#39;AIIDADB_PORT&#39;</span>
    <span class="n">KEY_DATABASE_HOSTNAME</span> <span class="o">=</span> <span class="s1">&#39;AIIDADB_HOST&#39;</span>
    <span class="n">KEY_DATABASE_USERNAME</span> <span class="o">=</span> <span class="s1">&#39;AIIDADB_USER&#39;</span>
    <span class="n">KEY_DATABASE_PASSWORD</span> <span class="o">=</span> <span class="s1">&#39;AIIDADB_PASS&#39;</span>  <span class="c1"># noqa</span>
    <span class="n">KEY_REPOSITORY_URI</span> <span class="o">=</span> <span class="s1">&#39;AIIDADB_REPOSITORY_URI&#39;</span>

    <span class="c1"># A mapping of valid attributes to the key under which they are stored in the configuration dictionary</span>
    <span class="n">_map_config_to_internal</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">KEY_OPTIONS</span><span class="p">:</span> <span class="s1">&#39;options&#39;</span><span class="p">,</span>
        <span class="n">KEY_UUID</span><span class="p">:</span> <span class="s1">&#39;uuid&#39;</span><span class="p">,</span>
        <span class="n">KEY_DEFAULT_USER</span><span class="p">:</span> <span class="s1">&#39;default_user&#39;</span><span class="p">,</span>
        <span class="n">KEY_DATABASE_ENGINE</span><span class="p">:</span> <span class="s1">&#39;database_engine&#39;</span><span class="p">,</span>
        <span class="n">KEY_DATABASE_BACKEND</span><span class="p">:</span> <span class="s1">&#39;database_backend&#39;</span><span class="p">,</span>
        <span class="n">KEY_DATABASE_NAME</span><span class="p">:</span> <span class="s1">&#39;database_name&#39;</span><span class="p">,</span>
        <span class="n">KEY_DATABASE_PORT</span><span class="p">:</span> <span class="s1">&#39;database_port&#39;</span><span class="p">,</span>
        <span class="n">KEY_DATABASE_HOSTNAME</span><span class="p">:</span> <span class="s1">&#39;database_hostname&#39;</span><span class="p">,</span>
        <span class="n">KEY_DATABASE_USERNAME</span><span class="p">:</span> <span class="s1">&#39;database_username&#39;</span><span class="p">,</span>
        <span class="n">KEY_DATABASE_PASSWORD</span><span class="p">:</span> <span class="s1">&#39;database_password&#39;</span><span class="p">,</span>
        <span class="n">KEY_REPOSITORY_URI</span><span class="p">:</span> <span class="s1">&#39;repository_uri&#39;</span><span class="p">,</span>
    <span class="p">}</span>

<div class="viewcode-block" id="Profile.contains_unknown_keys"><a class="viewcode-back" href="../../../../apidoc/aiida.manage.configuration.html#aiida.manage.configuration.Profile.contains_unknown_keys">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">contains_unknown_keys</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return whether the profile dictionary contains any unsupported keys.</span>

<span class="sd">        :param dictionary: a profile dictionary</span>
<span class="sd">        :return: boolean, True when the dictionay contains unsupported keys</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">dictionary</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">-</span> <span class="nb">set</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_map_config_to_internal</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span></div>

<div class="viewcode-block" id="Profile.__init__"><a class="viewcode-back" href="../../../../apidoc/aiida.manage.configuration.html#aiida.manage.configuration.Profile.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attributes</span><span class="p">,</span> <span class="n">from_config</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attributes</span><span class="p">,</span> <span class="n">collections</span><span class="o">.</span><span class="n">Mapping</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;attributes should be a mapping but is </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">attributes</span><span class="p">)))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">for</span> <span class="n">internal_key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">attributes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">from_config</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">internal_key</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_map_config_to_internal</span><span class="p">[</span><span class="n">internal_key</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="kn">from</span> <span class="nn">aiida.cmdline.utils</span> <span class="k">import</span> <span class="n">echo</span>
                    <span class="n">echo</span><span class="o">.</span><span class="n">echo_warning</span><span class="p">(</span><span class="s1">&#39;removed unsupported key `</span><span class="si">{}</span><span class="s1">` with value `</span><span class="si">{}</span><span class="s1">` from profile `</span><span class="si">{}</span><span class="s1">`&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="n">internal_key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
                    <span class="k">continue</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">internal_key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

        <span class="c1"># Create a default UUID if not specified</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">uuid</span> <span class="k">import</span> <span class="n">uuid4</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">uuid</span> <span class="o">=</span> <span class="n">uuid4</span><span class="p">()</span><span class="o">.</span><span class="n">hex</span>

        <span class="c1"># Currently, whether a profile is a test profile is solely determined by its name starting with &#39;test_&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_test_profile</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;test_&#39;</span><span class="p">))</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">uuid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the profile uuid.</span>

<span class="sd">        :return: string UUID</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_UUID</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="nd">@uuid</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">uuid</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_UUID</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">default_user</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_DEFAULT_USER</span><span class="p">]</span>

    <span class="nd">@default_user</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">default_user</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_DEFAULT_USER</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">database_engine</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_DATABASE_ENGINE</span><span class="p">]</span>

    <span class="nd">@database_engine</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">database_engine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_DATABASE_ENGINE</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">database_backend</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_DATABASE_BACKEND</span><span class="p">]</span>

    <span class="nd">@database_backend</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">database_backend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_DATABASE_BACKEND</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">database_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_DATABASE_NAME</span><span class="p">]</span>

    <span class="nd">@database_name</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">database_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_DATABASE_NAME</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">database_port</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_DATABASE_PORT</span><span class="p">]</span>

    <span class="nd">@database_port</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">database_port</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_DATABASE_PORT</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">database_hostname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_DATABASE_HOSTNAME</span><span class="p">]</span>

    <span class="nd">@database_hostname</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">database_hostname</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_DATABASE_HOSTNAME</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">database_username</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_DATABASE_USERNAME</span><span class="p">]</span>

    <span class="nd">@database_username</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">database_username</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_DATABASE_USERNAME</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">database_password</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_DATABASE_PASSWORD</span><span class="p">]</span>

    <span class="nd">@database_password</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">database_password</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_DATABASE_PASSWORD</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">repository_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_REPOSITORY_URI</span><span class="p">]</span>

    <span class="nd">@repository_uri</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">repository_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_REPOSITORY_URI</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">options</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="o">.</span><span class="n">setdefault</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_OPTIONS</span><span class="p">,</span> <span class="p">{})</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_OPTIONS</span><span class="p">]</span>

    <span class="nd">@options</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">KEY_OPTIONS</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

<div class="viewcode-block" id="Profile.get_option"><a class="viewcode-back" href="../../../../apidoc/aiida.manage.configuration.html#aiida.manage.configuration.Profile.get_option">[docs]</a>    <span class="k">def</span> <span class="nf">get_option</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">option_key</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">option_key</span><span class="p">,</span> <span class="n">default</span><span class="p">)</span></div>

<div class="viewcode-block" id="Profile.set_option"><a class="viewcode-back" href="../../../../apidoc/aiida.manage.configuration.html#aiida.manage.configuration.Profile.set_option">[docs]</a>    <span class="k">def</span> <span class="nf">set_option</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">option_key</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">override</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Set a configuration option for a certain scope.</span>

<span class="sd">        :param option_key: the key of the configuration option</span>
<span class="sd">        :param option_value: the option value</span>
<span class="sd">        :param override: boolean, if False, will not override the option if it already exists</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">option_key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="ow">or</span> <span class="n">override</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="n">option_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span></div>

<div class="viewcode-block" id="Profile.unset_option"><a class="viewcode-back" href="../../../../apidoc/aiida.manage.configuration.html#aiida.manage.configuration.Profile.unset_option">[docs]</a>    <span class="k">def</span> <span class="nf">unset_option</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">option_key</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">option_key</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the profile name.</span>

<span class="sd">        :return: the profile name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the profile attributes as a dictionary with keys as it is stored in the config</span>

<span class="sd">        :return: the profile configuration dictionary</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_attributes</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rmq_prefix</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the prefix that should be used for RMQ resources</span>

<span class="sd">        :return: the rmq prefix string</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">RMQ_PREFIX</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">uuid</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">uuid</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_test_profile</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return whether the profile is a test profile</span>

<span class="sd">        :return: boolean, True if test profile, False otherwise</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_test_profile</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">repository_path</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the absolute path of the repository configured for this profile.</span>

<span class="sd">        :return: absolute filepath of the profile&#39;s file repository</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parse_repository_uri</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>

<div class="viewcode-block" id="Profile._parse_repository_uri"><a class="viewcode-back" href="../../../../apidoc/aiida.manage.configuration.html#aiida.manage.configuration.Profile._parse_repository_uri">[docs]</a>    <span class="k">def</span> <span class="nf">_parse_repository_uri</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function validates the REPOSITORY_URI, that should be in the format protocol://address</span>

<span class="sd">        :note: At the moment, only the file protocol is supported.</span>

<span class="sd">        :return: a tuple (protocol, address).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">uritools</span>
        <span class="n">parts</span> <span class="o">=</span> <span class="n">uritools</span><span class="o">.</span><span class="n">urisplit</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">repository_uri</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">parts</span><span class="o">.</span><span class="n">scheme</span> <span class="o">!=</span> <span class="sa">u</span><span class="s1">&#39;file&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">ConfigurationError</span><span class="p">(</span><span class="s1">&#39;invalid repository protocol, only the local `file://` is supported&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isabs</span><span class="p">(</span><span class="n">parts</span><span class="o">.</span><span class="n">path</span><span class="p">):</span>
            <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">ConfigurationError</span><span class="p">(</span><span class="s1">&#39;invalid repository URI: the path has to be absolute&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">parts</span><span class="o">.</span><span class="n">scheme</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">parts</span><span class="o">.</span><span class="n">path</span><span class="p">)</span></div>

<div class="viewcode-block" id="Profile.configure_repository"><a class="viewcode-back" href="../../../../apidoc/aiida.manage.configuration.html#aiida.manage.configuration.Profile.configure_repository">[docs]</a>    <span class="k">def</span> <span class="nf">configure_repository</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Validates the configured repository and in the case of a file system repo makes sure the folder exists.&quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">errno</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">repository_path</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">OSError</span> <span class="k">as</span> <span class="n">exception</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">exception</span><span class="o">.</span><span class="n">errno</span> <span class="o">!=</span> <span class="n">errno</span><span class="o">.</span><span class="n">EEXIST</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">exceptions</span><span class="o">.</span><span class="n">ConfigurationError</span><span class="p">(</span><span class="s1">&#39;could not create the configured repository `</span><span class="si">{}</span><span class="s1">`: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">repository_path</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">exception</span><span class="p">)))</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">filepaths</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the filepaths used by this profile.</span>

<span class="sd">        :return: a dictionary of filepaths</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;circus&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;log&#39;</span><span class="p">:</span> <span class="n">CIRCUS_LOG_FILE_TEMPLATE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
                <span class="s1">&#39;pid&#39;</span><span class="p">:</span> <span class="n">CIRCUS_PID_FILE_TEMPLATE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
                <span class="s1">&#39;port&#39;</span><span class="p">:</span> <span class="n">CIRCUS_PORT_FILE_TEMPLATE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
                <span class="s1">&#39;socket&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="n">CIRCUS_SOCKET_FILE_TEMPATE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
                    <span class="s1">&#39;controller&#39;</span><span class="p">:</span> <span class="n">CIRCUS_CONTROLLER_SOCKET_TEMPLATE</span><span class="p">,</span>
                    <span class="s1">&#39;pubsub&#39;</span><span class="p">:</span> <span class="n">CIRCUS_PUBSUB_SOCKET_TEMPLATE</span><span class="p">,</span>
                    <span class="s1">&#39;stats&#39;</span><span class="p">:</span> <span class="n">CIRCUS_STATS_SOCKET_TEMPLATE</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="s1">&#39;daemon&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;log&#39;</span><span class="p">:</span> <span class="n">DAEMON_LOG_FILE_TEMPLATE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
                <span class="s1">&#39;pid&#39;</span><span class="p">:</span> <span class="n">DAEMON_PID_FILE_TEMPLATE</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="p">}</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>