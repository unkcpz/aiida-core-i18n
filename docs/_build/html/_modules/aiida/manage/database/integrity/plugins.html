

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>aiida.manage.database.integrity.plugins &mdash; AiiDA 1.0.0b2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../" src="../../../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../../../../_static/contentui.js"></script>
    
    <script type="text/javascript" src="../../../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../_static/contentui.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../index.html" class="icon icon-home"> AiiDA
          

          
          </a>

          
            
            
              <div class="version">
                1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Installation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../install/quick_installation.html">Quick installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../install/prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../install/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../install/updating_installation.html">Updating AiiDA</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../install/troubleshooting.html">Troubleshooting</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../get_started/index.html">First things first</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../get_started/daemon.html">Setup the daemon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../get_started/computers.html">Setup a computer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../get_started/codes.html">Setup a code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../get_started/plugins.html">Plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">Concepts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../concepts/provenance.html">Provenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../concepts/processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../concepts/calculations.html">Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../concepts/workflows.html">Workflows</a></li>
</ul>
<p class="caption"><span class="caption-text">Working with</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working/processes.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working/functions.html">Calculation and work functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working/calculations.html">Calculations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working/workflows.html">Workflows</a></li>
</ul>
<p class="caption"><span class="caption-text">Working with AiiDA</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html">Command line interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#scripting">Scripting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#data-types">Data types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#groups">Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#schedulers">Schedulers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#querying-data">Querying data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#caching">Caching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#result-manager">Result manager</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#backups">Backups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#rest-api">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../working_with_aiida/index.html#cookbook">Cookbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../import_export/index.html">Import and Export</a></li>
</ul>
<p class="caption"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../developer_guide/index.html">AiiDA design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../developer_guide/index.html#aiida-core">AiiDA core</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../developer_guide/index.html#aiida-plugins">AiiDA plugins</a></li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tutorial/index.html">StructureData</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tutorial/index.html#pseudopotentials">Pseudopotentials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../tutorial/index.html#plugin-development">Plugin development</a></li>
</ul>
<p class="caption"><span class="caption-text">API reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="`aiida package &lt;https://aiida-core.readthedocs.io/en/latest/apidoc/aiida.html&gt;`_">`aiida package &lt;https://aiida-core.readthedocs.io/en/latest/apidoc/aiida.html&gt;`_</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../index.html">AiiDA</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../../../../aiida.html">aiida</a> &raquo;</li>
        
          <li><a href="../integrity.html">aiida.manage.database.integrity</a> &raquo;</li>
        
      <li>aiida.manage.database.integrity.plugins</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for aiida.manage.database.integrity.plugins</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1">###########################################################################</span>
<span class="c1"># Copyright (c), The AiiDA team. All rights reserved.                     #</span>
<span class="c1"># This file is part of the AiiDA code.                                    #</span>
<span class="c1">#                                                                         #</span>
<span class="c1"># The code is hosted on GitHub at https://github.com/aiidateam/aiida_core #</span>
<span class="c1"># For further information on the license, see the LICENSE.txt file        #</span>
<span class="c1"># For further information please visit http://www.aiida.net               #</span>
<span class="c1">###########################################################################</span>
<span class="c1"># pylint: disable=invalid-name</span>
<span class="sd">&quot;&quot;&quot;Generic functions to verify the integrity of the database and optionally apply patches to fix problems.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">division</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">print_function</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">absolute_import</span>

<span class="c1"># These are all the entry points from the `aiida.calculations` category as registered with the AiiDA registry</span>
<span class="c1"># on Tuesday December 4 at 13:00:00 UTC</span>
<span class="n">registered_calculation_entry_points</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;ase.ase = aiida_ase.calculations.ase:AseCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;castep.bs = aiida_castep.calculations.castep:CastepBSCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;castep.castep = aiida_castep.calculations.castep:CastepCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;castep.pot1d = aiida_castep.calculations.castep:Pot1dCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;castep.spec = aiida_castep.calculations.castep:CastepSpectralCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;castep.ts = aiida_castep.calculations.castep:CastepTSCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;codtools.cifcellcontents = aiida_codtools.calculations.cifcellcontents:CifcellcontentsCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;codtools.cifcodcheck = aiida_codtools.calculations.cifcodcheck:CifcodcheckCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;codtools.cifcoddeposit = aiida_codtools.calculations.cifcoddeposit:CifcoddepositCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;codtools.cifcodnumbers = aiida_codtools.calculations.cifcodnumbers:CifcodnumbersCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;codtools.ciffilter = aiida_codtools.calculations.ciffilter:CiffilterCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;codtools.cifsplitprimitive = aiida_codtools.calculations.cifsplitprimitive:CifsplitprimitiveCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;cp2k = aiida_cp2k.calculations:Cp2kCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;crystal17.basic = aiida_crystal17.calculations.cry_basic:CryBasicCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;crystal17.immigrant = aiida_crystal17.calculations.cry_main_immigrant:CryMainImmigrantCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;crystal17.main = aiida_crystal17.calculations.cry_main:CryMainCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;ddec = aiida_ddec.calculations:DdecCalculation&#39;</span><span class="p">,</span> <span class="s1">&#39;diff = aiida_diff.calculations:DiffCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;dynaphopy = aiida_lammps.calculations.dynaphopy: DynaphopyCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;gollum.gollum = aiida_gollum.calculations.gollum:GollumCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;gudhi.rdm = aiida_gudhi.calculations.rips:RipsDistanceMatrixCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;kkr.kkr = aiida_kkr.calculations.kkr:KkrCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;kkr.kkrimp = aiida_kkr.calculations.kkrimp:KkrimpCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;kkr.kkrimporter = aiida_kkr.calculations.kkrimporter:KkrImporterCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;kkr.voro = aiida_kkr.calculations.voro:VoronoiCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;lammps.combinate = aiida_lammps.calculations.lammps.combinate:CombinateCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;lammps.force = aiida_lammps.calculations.lammps.force:ForceCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;lammps.md = aiida_lammps.calculations.lammps.md:MdCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;lammps.optimize = aiida_lammps.calculations.lammps.optimize:OptimizeCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;nwchem.basic = aiida_nwchem.calculations.basic:BasicCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;nwchem.pymatgen = aiida_nwchem.calculations.nwcpymatgen:NwcpymatgenCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;phonopy.phono3py = aiida_phonopy.calculations.phonopy.phono3py: Phono3pyCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;phonopy.phonopy = aiida_phonopy.calculations.phonopy.phonopy: PhonopyCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;phtools.dmatrix = aiida_phtools.calculations.distance_matrix:DistanceMatrixCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;phtools.surface = aiida_phtools.calculations.pore_surface:PoreSurfaceCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;qeq.eqeq = aiida_qeq.calculations.eqeq:EQeqCalculation&#39;</span><span class="p">,</span> <span class="s1">&#39;qeq.qeq = aiida_qeq.calculations.qeq:QeqCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;quantumespresso.cp = aiida_quantumespresso.calculations.cp:CpCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;quantumespresso.dos = aiida_quantumespresso.calculations.dos:DosCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;quantumespresso.hp = aiida_quantumespresso_hp.calculations.hp:HpCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;quantumespresso.matdyn = aiida_quantumespresso.calculations.matdyn:MatdynCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;quantumespresso.namelists = aiida_quantumespresso.calculations.namelists:NamelistsCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;quantumespresso.neb = aiida_quantumespresso.calculations.neb:NebCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;quantumespresso.ph = aiida_quantumespresso.calculations.ph:PhCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;quantumespresso.pp = aiida_quantumespresso.calculations.pp:PpCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;quantumespresso.projwfc = aiida_quantumespresso.calculations.projwfc:ProjwfcCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;quantumespresso.pw = aiida_quantumespresso.calculations.pw:PwCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;quantumespresso.pw2wannier90 = aiida_quantumespresso.calculations.pw2wannier90:Pw2wannier90Calculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;quantumespresso.pwimmigrant = aiida_quantumespresso.calculations.pwimmigrant:PwimmigrantCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;quantumespresso.q2r = aiida_quantumespresso.calculations.q2r:Q2rCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;raspa = aiida_raspa.calculations:RaspaCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;siesta.siesta = aiida_siesta.calculations.siesta:SiestaCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;siesta.stm = aiida_siesta.calculations.stm:STMCalculation&#39;</span><span class="p">,</span> <span class="s1">&#39;vasp.vasp = aiida_vasp.calcs.vasp:VaspCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;vasp.vasp2w90 = aiida_vasp.calcs.vasp2w90:Vasp2w90Calculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;wannier90.wannier90 = aiida_wannier90.calculations:Wannier90Calculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;yambo.yambo =  aiida_yambo.calculations.gw:YamboCalculation&#39;</span><span class="p">,</span>
    <span class="s1">&#39;zeopp.network = aiida_zeopp.calculations.network:NetworkCalculation&#39;</span>
<span class="p">]</span>


<div class="viewcode-block" id="infer_calculation_entry_point"><a class="viewcode-back" href="../../../../../apidoc/aiida.manage.database.integrity.html#aiida.manage.database.integrity.plugins.infer_calculation_entry_point">[docs]</a><span class="k">def</span> <span class="nf">infer_calculation_entry_point</span><span class="p">(</span><span class="n">type_strings</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Try to infer a calculation entry point name for all the calculation type strings that are found in the database.</span>

<span class="sd">    Before the plugin system was introduced, the `type` column of the node table was a string based on the base node</span>
<span class="sd">    type with the module path and class name appended. For example, for the `PwCalculation` class, which was a sub</span>
<span class="sd">    class of `JobCalculation`, would get `calculation.job.quantumespresso.pw.PwCalculation.` as its `type` string.</span>
<span class="sd">    At this point, the `JobCalculation` also still fullfilled the role of both the `Process` class as well as the</span>
<span class="sd">    `Node` class. In the migration for `v1.0.0`, this had to be migrated, where the `type` became that of the actual</span>
<span class="sd">    node i.e. `node.process.calculation.calcjob.CalcJobNode.` which would lose the information of which actual sub class</span>
<span class="sd">    it represented. This information should be stored in the `process_type` column, where the value is the name of the</span>
<span class="sd">    entry point of that calculation class.</span>

<span class="sd">    This function will, for a given set of calculation type strings of pre v1.0.0, try to map them on the known entry</span>
<span class="sd">    points for the calculation category. This is the union of those entry points registered at the AiiDA registry (see</span>
<span class="sd">    the mapping above) and those available in the environment in which this function is ran.</span>

<span class="sd">    If a type string cannot be mapped onto an entry point name, a fallback `process_type` string will be generated</span>
<span class="sd">    which is based on part of the old `type` string. For example, `calculation.job.unknown.UnknownCalculation.` would</span>
<span class="sd">    get the process type string `~unknown.UnknownCalculation`.</span>

<span class="sd">    The function will return a mapping of type strings onto their inferred process type strings.</span>

<span class="sd">    :param type_strings: a set of type strings whose entry point is to be inferred</span>
<span class="sd">    :return: a mapping of current node type string to the inferred entry point name</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">reentry.entrypoint</span> <span class="k">import</span> <span class="n">EntryPoint</span>
    <span class="kn">from</span> <span class="nn">aiida.plugins.entry_point</span> <span class="k">import</span> <span class="n">get_entry_points</span>

    <span class="n">prefix_calc_job</span> <span class="o">=</span> <span class="s1">&#39;calculation.job.&#39;</span>
    <span class="n">entry_point_group</span> <span class="o">=</span> <span class="s1">&#39;aiida.calculations&#39;</span>

    <span class="n">entry_point_names</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">mapping_node_type_to_entry_point</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="c1"># Build the list of known entry points, joining those present in the environment with the hard-coded set from taken</span>
    <span class="c1"># from the aiida-registry. Note that if entry points with the same name are found in both sets, the entry point</span>
    <span class="c1"># from the local environment is kept as leading.</span>
    <span class="n">entry_points_local</span> <span class="o">=</span> <span class="n">get_entry_points</span><span class="p">(</span><span class="n">group</span><span class="o">=</span><span class="n">entry_point_group</span><span class="p">)</span>
    <span class="n">entry_points_registry</span> <span class="o">=</span> <span class="p">[</span><span class="n">EntryPoint</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">entry_point</span><span class="p">)</span> <span class="k">for</span> <span class="n">entry_point</span> <span class="ow">in</span> <span class="n">registered_calculation_entry_points</span><span class="p">]</span>

    <span class="n">entry_points</span> <span class="o">=</span> <span class="n">entry_points_local</span>
    <span class="n">entry_point_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">entry_point</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">entry_point</span> <span class="ow">in</span> <span class="n">entry_points</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">entry_point</span> <span class="ow">in</span> <span class="n">entry_points_registry</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">entry_point</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">entry_point_names</span><span class="p">:</span>
            <span class="n">entry_point_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry_point</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">type_string</span> <span class="ow">in</span> <span class="n">type_strings</span><span class="p">:</span>

        <span class="c1"># If it does not start with the calculation job prefix, it cannot possibly reference a calculation plugin</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">type_string</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">prefix_calc_job</span><span class="p">):</span>
            <span class="k">continue</span>

        <span class="n">plugin_string</span> <span class="o">=</span> <span class="n">type_string</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix_calc_job</span><span class="p">):]</span>
        <span class="n">plugin_parts</span> <span class="o">=</span> <span class="p">[</span><span class="n">part</span> <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">plugin_string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="k">if</span> <span class="n">part</span><span class="p">]</span>
        <span class="n">plugin_class</span> <span class="o">=</span> <span class="n">plugin_parts</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
        <span class="n">inferred_entry_point_name</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">plugin_parts</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">inferred_entry_point_name</span> <span class="ow">in</span> <span class="n">entry_point_names</span><span class="p">:</span>
            <span class="n">entry_point_string</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{entry_point_group}</span><span class="s1">:</span><span class="si">{entry_point_name}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">entry_point_group</span><span class="o">=</span><span class="n">entry_point_group</span><span class="p">,</span> <span class="n">entry_point_name</span><span class="o">=</span><span class="n">inferred_entry_point_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">inferred_entry_point_name</span><span class="p">:</span>
            <span class="n">entry_point_string</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">{plugin_name}</span><span class="s1">.</span><span class="si">{plugin_class}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">plugin_name</span><span class="o">=</span><span class="n">inferred_entry_point_name</span><span class="p">,</span> <span class="n">plugin_class</span><span class="o">=</span><span class="n">plugin_class</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># If there is no inferred entry point name, i.e. there is no module name, use an empty string as fall back</span>
            <span class="c1"># This should only be the case for the type string `calculation.job.JobCalculation.`</span>
            <span class="n">entry_point_string</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>

        <span class="n">mapping_node_type_to_entry_point</span><span class="p">[</span><span class="n">type_string</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry_point_string</span>

    <span class="k">return</span> <span class="n">mapping_node_type_to_entry_point</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, ECOLE POLYTECHNIQUE FEDERALE DE LAUSANNE (Theory and Simulation of Materials (THEOS) and National Centre for Computational Design and Discovery of Novel Materials (NCCR MARVEL)), Switzerland and ROBERT BOSCH LLC, USA. All rights reserved

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>